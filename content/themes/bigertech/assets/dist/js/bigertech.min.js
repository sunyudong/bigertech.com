var isIE=function(t){var e=document.createElement("b");return e.innerHTML="<!--[if IE "+t+"]><i></i><![endif]-->",1===e.getElementsByTagName("i").length};if(isIE(7))alert("你的浏览器版本太低，请尽快升级,以便获得更好的浏览体验");else var animatedHeader=function(){function t(){window.addEventListener?window.addEventListener("scroll",function(){s||(s=!0,setTimeout(e,250))},!1):window.attachEvent("onscroll",function(){s||(s=!0,setTimeout(e,250))})}function e(){var t=n();t>=r?classie.add(o,"navbar-pinned"):classie.remove(o,"navbar-pinned"),s=!1}function n(){return window.pageYOffset||i.scrollTop}var i=document.documentElement,o=document.querySelector(".navbar"),s=!1,r=312;if(document.querySelector(".home-template")&&document.body.clientWidth>740&&t(),document.querySelector(".category-template")){if(document.querySelector(".archive-template"))return!1;document.body.clientWidth>740&&t()}if(document.querySelector(".author-template")){if(document.querySelector(".archive-template"))return!1;document.body.clientWidth>740&&t()}}();!function(t){"use strict";function e(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function n(t,e){var n=i(t,e)?s:o;n(t,e)}var i,o,s;"classList"in document.documentElement?(i=function(t,e){return t.classList.contains(e)},o=function(t,e){t.classList.add(e)},s=function(t,e){t.classList.remove(e)}):(i=function(t,n){return e(n).test(t.className)},o=function(t,e){i(t,e)||(t.className=t.className+" "+e)},s=function(t,n){t.className=t.className.replace(e(n)," ")});var r={hasClass:i,addClass:o,removeClass:s,toggleClass:n,has:i,add:o,remove:s,toggle:n};"function"==typeof define&&define.amd?define(r):"object"==typeof exports?module.exports=r:t.classie=r}(window),jQuery(function(t){navigator.userAgent.indexOf("MSIE")<0&&console.log("^_^ 想加入笔戈科技开发团队？请发送邮件到 liuxing@meizu.com"),t("img.lazy")&&t("img.lazy").length>0&&t("img.lazy").lazyload({effect:"fadeIn",threshold:500}),t(document).ready(function(){var e=t(".qrcode");t(".icon-wechat").hover(function(){var n=t(this).position();e.css("left",(t(window).width()-e.width())/2),e.css("top",n.top-270),e.fadeIn().show()},function(){e.hide()})})}),!function(t,e,n,i){var o=t(e);t.fn.lazyload=function(s){function r(){var e=0;a.each(function(){var n=t(this);if(!l.skip_invisible||n.is(":visible"))if(t.abovethetop(this,l)||t.leftofbegin(this,l));else if(t.belowthefold(this,l)||t.rightoffold(this,l)){if(++e>l.failure_limit)return!1}else n.trigger("appear"),e=0})}var c,a=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(i!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),i!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),t.extend(l,s)),c=l.container===i||l.container===e?o:t(l.container),0===l.event.indexOf("scroll")&&c.bind(l.event,function(){return r()}),this.each(function(){var e=this,n=t(e);e.loaded=!1,(n.attr("src")===i||n.attr("src")===!1)&&n.is("img")&&n.attr("src",l.placeholder),n.one("appear",function(){if(!this.loaded){if(l.appear){var i=a.length;l.appear.call(e,i,l)}t("<img />").bind("load",function(){var i=n.attr("data-"+l.data_attribute);n.hide(),n.is("img")?n.attr("src",i):n.css("background-image","url('"+i+"')"),n[l.effect](l.effect_speed),e.loaded=!0;var o=t.grep(a,function(t){return!t.loaded});if(a=t(o),l.load){var s=a.length;l.load.call(e,s,l)}}).attr("src",n.attr("data-"+l.data_attribute))}}),0!==l.event.indexOf("scroll")&&n.bind(l.event,function(){e.loaded||n.trigger("appear")})}),o.bind("resize",function(){r()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&o.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&a.each(function(){t(this).trigger("appear")})}),t(n).ready(function(){r()}),this},t.belowthefold=function(n,s){var r;return r=s.container===i||s.container===e?(e.innerHeight?e.innerHeight:o.height())+o.scrollTop():t(s.container).offset().top+t(s.container).height(),r<=t(n).offset().top-s.threshold},t.rightoffold=function(n,s){var r;return r=s.container===i||s.container===e?o.width()+o.scrollLeft():t(s.container).offset().left+t(s.container).width(),r<=t(n).offset().left-s.threshold},t.abovethetop=function(n,s){var r;return r=s.container===i||s.container===e?o.scrollTop():t(s.container).offset().top,r>=t(n).offset().top+s.threshold+t(n).height()},t.leftofbegin=function(n,s){var r;return r=s.container===i||s.container===e?o.scrollLeft():t(s.container).offset().left,r>=t(n).offset().left+s.threshold+t(n).width()},t.inviewport=function(e,n){return!(t.rightoffold(e,n)||t.leftofbegin(e,n)||t.belowthefold(e,n)||t.abovethetop(e,n))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document);var Menu={settings:{menuBtn:$(".js-menuBtn"),menu:$(".js-menu"),closeBtn:$(".js-closeBtn"),bg:$(".js-Bg"),container:$(".js-menuContainer"),isOpen:!1,isAnimating:!1},init:function(){this.bindUIActions()},bindUIActions:function(){var t=this.settings;t.menuBtn.click(function(){Menu.toggle()}),t.bg.click(function(){Menu.close()}),t.container.click(function(){Menu.close()}),t.closeBtn.click(function(){Menu.close()}),$(window).keydown(function(t){27===t.which&&Menu.close()})},toggle:function(){var t=this.settings;t.isOpen?Menu.close():Menu.open()},open:function(){function t(){e.menu.addClass("is-active"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!0,e.isAnimating=!0,e.menu.css("display","block"),setTimeout(t,100))},close:function(){function t(){e.menu.css("display","none"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!1,e.isAnimating=!0,e.menu.removeClass("is-active"),setTimeout(t,1200))}},Search={settings:{textBox:$(".textbox"),searchBtn:$(".js-searchBtn"),search:$(".js-search"),closeBtn:$(".js-closeBtn"),bg:$(".js-Bg"),container:$(".js-searchContainer"),isOpen:!1,isAnimating:!1},init:function(){this.bindUIActions()},bindUIActions:function(){var t=this.settings;t.searchBtn.click(function(){Search.toggle()}),t.textBox.click(function(){return!1}),t.bg.click(function(){Search.close()}),t.container.click(function(){Search.close()}),t.closeBtn.click(function(){Search.close()}),$(window).keydown(function(t){27===t.which&&Search.close()})},toggle:function(){var t=this.settings;t.isOpen?Search.close():Search.open()},open:function(){function t(){e.search.addClass("is-active"),e.textBox.focus(),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!0,e.search.css("display","block"),setTimeout(t,100))},close:function(){function t(){e.search.css("display","none"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!1,e.isAnimating=!0,e.search.removeClass("is-active"),setTimeout(t,1200))}};$(document).ready(function(){Menu.init(),Search.init()});var scrolltotop={setting:{startline:100,scrollto:0,scrollduration:1e3,fadeduration:[500,100]},controlHTML:"<div id='toTop' class='icon-up'></div>",controlattrs:{offsetx:5,offsety:5},anchorkeyword:"#top",state:{isvisible:!1,shouldvisible:!1},scrollup:function(){this.cssfixedsupport||this.$control.css({opacity:0});var t=isNaN(this.setting.scrollto)?this.setting.scrollto:parseInt(this.setting.scrollto);t="string"==typeof t&&1==jQuery("#"+t).length?jQuery("#"+t).offset().top:0,this.$body.animate({scrollTop:t},this.setting.scrollduration)},keepfixed:function(){var t=jQuery(window),e=t.scrollLeft()+t.width()-this.$control.width()-this.controlattrs.offsetx,n=t.scrollTop()+t.height()-this.$control.height()-this.controlattrs.offsety;this.$control.css({left:e+"px",top:n+"px"})},togglecontrol:function(){var t=jQuery(window).scrollTop();this.cssfixedsupport||this.keepfixed(),this.state.shouldvisible=t>=this.setting.startline?!0:!1,this.state.shouldvisible&&!this.state.isvisible?(this.$control.stop().animate({opacity:1},this.setting.fadeduration[0]),this.state.isvisible=!0):0==this.state.shouldvisible&&this.state.isvisible&&(this.$control.stop().animate({opacity:0},this.setting.fadeduration[1]),this.state.isvisible=!1)},init:function(){jQuery(document).ready(function(t){var e=scrolltotop,n=document.all;e.cssfixedsupport=!n||n&&"CSS1Compat"==document.compatMode&&window.XMLHttpRequest,e.$body=window.opera?"CSS1Compat"==document.compatMode?t("html"):t("body"):t("html,body"),e.$control=t('<div id="topcontrol">'+e.controlHTML+"</div>").css({position:e.cssfixedsupport?"fixed":"absolute",bottom:e.controlattrs.offsety,right:e.controlattrs.offsetx,opacity:0,cursor:"pointer"}).attr({title:"Scroll to Top"}).click(function(){return e.scrollup(),!1}).appendTo("body"),document.all&&!window.XMLHttpRequest&&""!=e.$control.text()&&e.$control.css({width:e.$control.width()}),e.togglecontrol(),t('a[href="'+e.anchorkeyword+'"]').click(function(){return e.scrollup(),!1}),t(window).bind("scroll resize",function(){e.togglecontrol()})})}};scrolltotop.init(),function(t){"use strict";t(document).ready(function(){t(".scroll-down").arctic_scroll()})}(jQuery),function(t){t.fn.arctic_scroll=function(e){var n={elem:t(this),speed:500},e=t.extend(n,e);e.elem.click(function(n){n.preventDefault();var i=t(this).attr("data-offset")?t(this).attr("data-offset"):!1,o=t(this).attr("data-position")?t(this).attr("data-position"):!1;if(i){var s=parseInt(i);t("html,body").stop(!0,!1).animate({scrollTop:t(this.hash).offset().top+s},e.speed)}else if(o){var s=parseInt(o);t("html,body").stop(!0,!1).animate({scrollTop:s},e.speed)}else t("html,body").stop(!0,!1).animate({scrollTop:t(this.hash).offset().top},e.speed)})}}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGVkSGVhZGVyLmpzIiwiY2xhc3NpZS5qcyIsImluZGV4LmpzIiwianF1ZXJ5Lmxhenlsb2FkLm1pbi5qcyIsIm5hdmJhci5qcyIsInJldHVyblRvcC5qcyIsInNjcm9sbF9kb3duLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVdBLEdBQUEsTUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsY0FBQSxJQUVBLE9BREEsR0FBQSxVQUFBLGNBQUEsRUFBQSx3QkFDQSxJQUFBLEVBQUEscUJBQUEsS0FBQSxPQUdBLElBQUEsS0FBQSxHQUNBLE1BQUEsbUNBRUEsSUFBQSxnQkFBQSxXQU9BLFFBQUEsS0FDQSxPQUFBLGlCQUNBLE9BQUEsaUJBQUEsU0FBQSxXQUNBLElBQ0EsR0FBQSxFQUNBLFdBQUEsRUFBQSxRQUVBLEdBRUEsT0FBQSxZQUFBLFdBQUEsV0FDQSxJQUNBLEdBQUEsRUFDQSxXQUFBLEVBQUEsUUFNQSxRQUFBLEtBQ0EsR0FBQSxHQUFBLEdBQ0EsSUFBQSxFQUNBLFFBQUEsSUFBQSxFQUFBLGlCQUdBLFFBQUEsT0FBQSxFQUFBLGlCQUdBLEdBQUEsRUFHQSxRQUFBLEtBQ0EsTUFBQSxRQUFBLGFBQUEsRUFBQSxVQXBDQSxHQUFBLEdBQUEsU0FBQSxnQkFDQSxFQUFBLFNBQUEsY0FBQSxXQUNBLEdBQUEsRUFDQSxFQUFBLEdBMENBLElBTkEsU0FBQSxjQUFBLG1CQUNBLFNBQUEsS0FBQSxZQUFBLEtBQ0EsSUFJQSxTQUFBLGNBQUEsc0JBQUEsQ0FDQSxHQUFBLFNBQUEsY0FBQSxxQkFDQSxPQUFBLENBRUEsVUFBQSxLQUFBLFlBQUEsS0FDQSxJQUtBLEdBQUEsU0FBQSxjQUFBLG9CQUFBLENBQ0EsR0FBQSxTQUFBLGNBQUEscUJBQ0EsT0FBQSxDQUVBLFVBQUEsS0FBQSxZQUFBLEtBQ0EsU0MvREEsU0FBQSxHQUVBLFlBSUEsU0FBQSxHQUFBLEdBQ0EsTUFBQSxJQUFBLFFBQUEsV0FBQSxFQUFBLFlBZ0NBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsQ0FDQSxHQUFBLEVBQUEsR0E3QkEsR0FBQSxHQUFBLEVBQUEsQ0FFQSxjQUFBLFVBQUEsaUJBQ0EsRUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsVUFBQSxTQUFBLElBRUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFVBQUEsSUFBQSxJQUVBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLE9BQUEsTUFJQSxFQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxHQUFBLEtBQUEsRUFBQSxZQUVBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEtBQ0EsRUFBQSxVQUFBLEVBQUEsVUFBQSxJQUFBLElBR0EsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFVBQUEsRUFBQSxVQUFBLFFBQUEsRUFBQSxHQUFBLE1BU0EsSUFBQSxJQUVBLFNBQUEsRUFDQSxTQUFBLEVBQ0EsWUFBQSxFQUNBLFlBQUEsRUFFQSxJQUFBLEVBQ0EsSUFBQSxFQUNBLE9BQUEsRUFDQSxPQUFBLEVBSUEsbUJBQUEsU0FBQSxPQUFBLElBRUEsT0FBQSxHQUNBLGdCQUFBLFNBRUEsT0FBQSxRQUFBLEVBR0EsRUFBQSxRQUFBLEdBR0EsUUNwRkEsT0FBQSxTQUFBLEdBQ0EsVUFBQSxVQUFBLFFBQUEsUUFBQSxHQUVBLFFBQUEsSUFBQSw0Q0FHQSxFQUFBLGFBQUEsRUFBQSxZQUFBLE9BQUEsR0FDQSxFQUFBLFlBQUEsVUFDQSxPQUFBLFNBQ0EsVUFBQSxNQUdBLEVBQUEsVUFBQSxNQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsVUFDQSxHQUFBLGdCQUFBLE1BQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLFVBQ0EsR0FBQSxJQUFBLFFBQUEsRUFBQSxRQUFBLFFBQUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxJQUFBLE1BQUEsRUFBQSxJQUFBLEtBQ0EsRUFBQSxTQUFBLFFBQ0EsV0FDQSxFQUFBLGNDdkJBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxTQUFBLFNBQUEsR0FBQSxRQUFBLEtBQUEsR0FBQSxHQUFBLENBQUEsR0FBQSxLQUFBLFdBQUEsR0FBQSxHQUFBLEVBQUEsS0FBQSxLQUFBLEVBQUEsZ0JBQUEsRUFBQSxHQUFBLFlBQUEsR0FBQSxFQUFBLFlBQUEsS0FBQSxJQUFBLEVBQUEsWUFBQSxLQUFBLFFBQUEsSUFBQSxFQUFBLGFBQUEsS0FBQSxJQUFBLEVBQUEsWUFBQSxLQUFBLElBQUEsS0FBQSxFQUFBLEVBQUEsY0FBQSxPQUFBLE1BQUEsR0FBQSxRQUFBLFVBQUEsRUFBQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEtBQUEsR0FBQSxVQUFBLEVBQUEsY0FBQSxFQUFBLE1BQUEsU0FBQSxPQUFBLE9BQUEsVUFBQSxFQUFBLGVBQUEsV0FBQSxnQkFBQSxFQUFBLE9BQUEsS0FBQSxLQUFBLEtBQUEsWUFBQSx5TEFBQSxPQUFBLEtBQUEsSUFBQSxFQUFBLGVBQUEsRUFBQSxjQUFBLEVBQUEsbUJBQUEsR0FBQSxjQUFBLElBQUEsRUFBQSxjQUFBLEVBQUEsYUFBQSxFQUFBLGtCQUFBLEdBQUEsYUFBQSxFQUFBLE9BQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxZQUFBLEdBQUEsRUFBQSxZQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsV0FBQSxJQUFBLEVBQUEsTUFBQSxRQUFBLFdBQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxXQUFBLE1BQUEsT0FBQSxLQUFBLEtBQUEsV0FBQSxHQUFBLEdBQUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsR0FBQSxFQUFBLEtBQUEsU0FBQSxHQUFBLEVBQUEsS0FBQSxVQUFBLElBQUEsRUFBQSxHQUFBLFFBQUEsRUFBQSxLQUFBLE1BQUEsRUFBQSxhQUFBLEVBQUEsSUFBQSxTQUFBLFdBQUEsSUFBQSxLQUFBLE9BQUEsQ0FBQSxHQUFBLEVBQUEsT0FBQSxDQUFBLEdBQUEsR0FBQSxFQUFBLE1BQUEsR0FBQSxPQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxXQUFBLEtBQUEsT0FBQSxXQUFBLEdBQUEsR0FBQSxFQUFBLEtBQUEsUUFBQSxFQUFBLGVBQUEsR0FBQSxPQUFBLEVBQUEsR0FBQSxPQUFBLEVBQUEsS0FBQSxNQUFBLEdBQUEsRUFBQSxJQUFBLG1CQUFBLFFBQUEsRUFBQSxNQUFBLEVBQUEsRUFBQSxRQUFBLEVBQUEsY0FBQSxFQUFBLFFBQUEsQ0FBQSxJQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxRQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxLQUFBLENBQUEsR0FBQSxHQUFBLEVBQUEsTUFBQSxHQUFBLEtBQUEsS0FBQSxFQUFBLEVBQUEsTUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLFFBQUEsRUFBQSxvQkFBQSxJQUFBLEVBQUEsTUFBQSxRQUFBLFdBQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxXQUFBLEVBQUEsUUFBQSxFQUFBLFFBQUEsY0FBQSxFQUFBLEtBQUEsU0FBQSxXQUFBLE1BQUEsK0JBQUEsS0FBQSxVQUFBLGFBQUEsRUFBQSxLQUFBLFdBQUEsU0FBQSxHQUFBLEVBQUEsZUFBQSxFQUFBLGNBQUEsV0FBQSxFQUFBLEtBQUEsV0FBQSxFQUFBLE1BQUEsUUFBQSxjQUFBLEVBQUEsR0FBQSxNQUFBLFdBQUEsTUFBQSxNQUFBLEVBQUEsYUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUEsWUFBQSxHQUFBLEVBQUEsWUFBQSxHQUFBLEVBQUEsWUFBQSxFQUFBLFlBQUEsRUFBQSxVQUFBLEVBQUEsWUFBQSxFQUFBLEVBQUEsV0FBQSxTQUFBLElBQUEsRUFBQSxFQUFBLFdBQUEsU0FBQSxHQUFBLEVBQUEsR0FBQSxTQUFBLElBQUEsRUFBQSxXQUFBLEVBQUEsWUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUEsWUFBQSxHQUFBLEVBQUEsWUFBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLGFBQUEsRUFBQSxFQUFBLFdBQUEsU0FBQSxLQUFBLEVBQUEsRUFBQSxXQUFBLFFBQUEsR0FBQSxFQUFBLEdBQUEsU0FBQSxLQUFBLEVBQUEsV0FBQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLFlBQUEsR0FBQSxFQUFBLFlBQUEsRUFBQSxFQUFBLFlBQUEsRUFBQSxFQUFBLFdBQUEsU0FBQSxJQUFBLEdBQUEsRUFBQSxHQUFBLFNBQUEsSUFBQSxFQUFBLFVBQUEsRUFBQSxHQUFBLFVBQUEsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEdBQUEsRUFBQSxZQUFBLEdBQUEsRUFBQSxZQUFBLEVBQUEsRUFBQSxhQUFBLEVBQUEsRUFBQSxXQUFBLFNBQUEsS0FBQSxHQUFBLEVBQUEsR0FBQSxTQUFBLEtBQUEsRUFBQSxVQUFBLEVBQUEsR0FBQSxTQUFBLEVBQUEsV0FBQSxTQUFBLEVBQUEsR0FBQSxRQUFBLEVBQUEsWUFBQSxFQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsSUFBQSxFQUFBLGFBQUEsRUFBQSxJQUFBLEVBQUEsWUFBQSxFQUFBLEtBQUEsRUFBQSxPQUFBLEVBQUEsS0FBQSxNQUFBLGlCQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsYUFBQSxHQUFBLFVBQUEsS0FBQSxnQkFBQSxTQUFBLEdBQUEsT0FBQSxFQUFBLGFBQUEsR0FBQSxVQUFBLEtBQUEsa0JBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxZQUFBLEdBQUEsVUFBQSxLQUFBLGlCQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsWUFBQSxHQUFBLFVBQUEsS0FBQSxjQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsV0FBQSxHQUFBLFVBQUEsS0FBQSxpQkFBQSxTQUFBLEdBQUEsT0FBQSxFQUFBLGFBQUEsR0FBQSxVQUFBLEtBQUEsZ0JBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxZQUFBLEdBQUEsVUFBQSxLQUFBLGVBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxZQUFBLEdBQUEsVUFBQSxRQUFBLE9BQUEsT0FBQSxTQ0RBLElBQUEsT0FDQSxVQUNBLFFBQUEsRUFBQSxlQUNBLEtBQUEsRUFBQSxZQUNBLFNBQUEsRUFBQSxnQkFDQSxHQUFBLEVBQUEsVUFDQSxVQUFBLEVBQUEscUJBQ0EsUUFBQSxFQUNBLGFBQUEsR0FFQSxLQUFBLFdBQ0EsS0FBQSxpQkFFQSxjQUFBLFdBQ0EsR0FBQSxHQUFBLEtBQUEsUUFDQSxHQUFBLFFBQUEsTUFBQSxXQUNBLEtBQUEsV0FFQSxFQUFBLEdBQUEsTUFBQSxXQUNBLEtBQUEsVUFFQSxFQUFBLFVBQUEsTUFBQSxXQUNBLEtBQUEsVUFFQSxFQUFBLFNBQUEsTUFBQSxXQUNBLEtBQUEsVUFFQSxFQUFBLFFBQUEsUUFBQSxTQUFBLEdBQ0EsS0FBQSxFQUFBLE9BQUEsS0FBQSxXQUdBLE9BQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsT0FBQSxLQUFBLFFBQUEsS0FBQSxRQUVBLEtBQUEsV0FDQSxRQUFBLEtBQ0EsRUFBQSxLQUFBLFNBQUEsYUFDQSxFQUFBLGFBQUEsRUFFQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsZUFBQSxJQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsYUFBQSxFQUNBLEVBQUEsS0FBQSxJQUFBLFVBQUEsU0FDQSxXQUFBLEVBQUEsT0FHQSxNQUFBLFdBQ0EsUUFBQSxLQUNBLEVBQUEsS0FBQSxJQUFBLFVBQUEsUUFDQSxFQUFBLGFBQUEsRUFFQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsZUFBQSxJQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsYUFBQSxFQUNBLEVBQUEsS0FBQSxZQUFBLGFBQ0EsV0FBQSxFQUFBLFNBR0EsUUFDQSxVQUNBLFFBQUEsRUFBQSxZQUNBLFVBQUEsRUFBQSxpQkFDQSxPQUFBLEVBQUEsY0FDQSxTQUFBLEVBQUEsZ0JBQ0EsR0FBQSxFQUFBLFVBQ0EsVUFBQSxFQUFBLHVCQUNBLFFBQUEsRUFDQSxhQUFBLEdBRUEsS0FBQSxXQUNBLEtBQUEsaUJBRUEsY0FBQSxXQUNBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxVQUFBLE1BQUEsV0FDQSxPQUFBLFdBR0EsRUFBQSxRQUFBLE1BQUEsV0FDQSxPQUFBLElBRUEsRUFBQSxHQUFBLE1BQUEsV0FDQSxPQUFBLFVBRUEsRUFBQSxVQUFBLE1BQUEsV0FDQSxPQUFBLFVBRUEsRUFBQSxTQUFBLE1BQUEsV0FDQSxPQUFBLFVBRUEsRUFBQSxRQUFBLFFBQUEsU0FBQSxHQUNBLEtBQUEsRUFBQSxPQUFBLE9BQUEsV0FHQSxPQUFBLFdBQ0EsR0FBQSxHQUFBLEtBQUEsUUFDQSxHQUFBLE9BQUEsT0FBQSxRQUFBLE9BQUEsUUFFQSxLQUFBLFdBQ0EsUUFBQSxLQUNBLEVBQUEsT0FBQSxTQUFBLGFBQ0EsRUFBQSxRQUFBLFFBQ0EsRUFBQSxhQUFBLEVBRUEsR0FBQSxHQUFBLEtBQUEsUUFDQSxHQUFBLGVBQUEsSUFDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLE9BQUEsSUFBQSxVQUFBLFNBQ0EsV0FBQSxFQUFBLE9BSUEsTUFBQSxXQUNBLFFBQUEsS0FDQSxFQUFBLE9BQUEsSUFBQSxVQUFBLFFBQ0EsRUFBQSxhQUFBLEVBRUEsR0FBQSxHQUFBLEtBQUEsUUFDQSxHQUFBLGVBQUEsSUFDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLGFBQUEsRUFDQSxFQUFBLE9BQUEsWUFBQSxhQUNBLFdBQUEsRUFBQSxRQU1BLEdBQUEsVUFBQSxNQUFBLFdBQ0EsS0FBQSxPQUNBLE9BQUEsUUNySUEsSUFBQSxjQU1BLFNBQUEsVUFBQSxJQUFBLFNBQUEsRUFBQSxlQUFBLElBQUEsY0FBQSxJQUFBLE1BRUEsWUFBQSx5Q0FFQSxjQUFBLFFBQUEsRUFBQSxRQUFBLEdBRUEsY0FBQSxPQUVBLE9BQUEsV0FBQSxFQUFBLGVBQUEsR0FHQSxTQUFBLFdBRUEsS0FBQSxpQkFFQSxLQUFBLFNBQUEsS0FBQSxRQUFBLEdBRUEsSUFBQSxHQUFBLE1BQUEsS0FBQSxRQUFBLFVBQUEsS0FBQSxRQUFBLFNBQUEsU0FBQSxLQUFBLFFBQUEsU0FJQSxHQUZBLGdCQUFBLElBQUEsR0FBQSxPQUFBLElBQUEsR0FBQSxPQUVBLE9BQUEsSUFBQSxHQUFBLFNBQUEsSUFJQSxFQUVBLEtBQUEsTUFBQSxTQUFBLFVBQUEsR0FBQSxLQUFBLFFBQUEsaUJBS0EsVUFBQSxXQUVBLEdBQUEsR0FBQSxPQUFBLFFBRUEsRUFBQSxFQUFBLGFBQUEsRUFBQSxRQUFBLEtBQUEsU0FBQSxRQUFBLEtBQUEsYUFBQSxRQUVBLEVBQUEsRUFBQSxZQUFBLEVBQUEsU0FBQSxLQUFBLFNBQUEsU0FBQSxLQUFBLGFBQUEsT0FFQSxNQUFBLFNBQUEsS0FBQSxLQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsUUFLQSxjQUFBLFdBSUEsR0FBQSxHQUFBLE9BQUEsUUFBQSxXQUVBLE1BQUEsaUJBRUEsS0FBQSxZQUVBLEtBQUEsTUFBQSxjQUFBLEdBQUEsS0FBQSxRQUFBLFdBQUEsR0FBQSxFQUVBLEtBQUEsTUFBQSxnQkFBQSxLQUFBLE1BQUEsV0FFQSxLQUFBLFNBQUEsT0FBQSxTQUFBLFFBQUEsR0FBQSxLQUFBLFFBQUEsYUFBQSxJQUVBLEtBQUEsTUFBQSxXQUFBLEdBSUEsR0FBQSxLQUFBLE1BQUEsZUFBQSxLQUFBLE1BQUEsWUFFQSxLQUFBLFNBQUEsT0FBQSxTQUFBLFFBQUEsR0FBQSxLQUFBLFFBQUEsYUFBQSxJQUVBLEtBQUEsTUFBQSxXQUFBLElBS0EsS0FBQSxXQUNBLE9BQUEsVUFBQSxNQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsWUFDQSxFQUFBLFNBQUEsR0FDQSxHQUFBLGlCQUFBLEdBQUEsR0FBQSxjQUFBLFNBQUEsWUFBQSxPQUFBLGVBQ0EsRUFBQSxNQUFBLE9BQUEsTUFBQSxjQUFBLFNBQUEsV0FBQSxFQUFBLFFBQUEsRUFBQSxRQUFBLEVBQUEsYUFDQSxFQUFBLFNBQUEsRUFBQSx3QkFBQSxFQUFBLFlBQUEsVUFDQSxLQUFBLFNBQUEsRUFBQSxnQkFBQSxRQUFBLFdBQUEsT0FBQSxFQUFBLGFBQUEsUUFBQSxNQUFBLEVBQUEsYUFBQSxRQUFBLFFBQUEsRUFBQSxPQUFBLFlBQ0EsTUFBQSxNQUFBLGtCQUNBLE1BQUEsV0FBQSxNQUFBLEdBQUEsWUFBQSxJQUNBLFNBQUEsUUFDQSxTQUFBLE1BQUEsT0FBQSxnQkFBQSxJQUFBLEVBQUEsU0FBQSxRQUNBLEVBQUEsU0FBQSxLQUFBLE1BQUEsRUFBQSxTQUFBLFVBQ0EsRUFBQSxnQkFFQSxFQUFBLFdBQUEsRUFBQSxjQUFBLE1BQUEsTUFBQSxXQUVBLE1BREEsR0FBQSxZQUNBLElBRUEsRUFBQSxRQUFBLEtBQUEsZ0JBQUEsV0FDQSxFQUFBLHFCQUtBLGFBQUEsT0N4R0EsU0FBQSxHQUNBLFlBQ0EsR0FBQSxVQUFBLE1BQUEsV0FDQSxFQUFBLGdCQUFBLG1CQUdBLFFBRUEsU0FBQSxHQUNBLEVBQUEsR0FBQSxjQUFBLFNBQUEsR0FFQSxHQUFBLElBQ0EsS0FBQSxFQUFBLE1BQ0EsTUFBQSxLQUVBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFFQSxHQUFBLEtBQUEsTUFBQSxTQUFBLEdBQ0EsRUFBQSxnQkFDQSxJQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsZUFBQSxFQUFBLE1BQUEsS0FBQSxnQkFBQSxFQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsaUJBQUEsRUFBQSxNQUFBLEtBQUEsa0JBQUEsQ0FDQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsU0FBQSxFQUNBLEdBQUEsYUFBQSxNQUFBLEdBQUEsR0FBQSxTQUFBLFVBQUEsRUFBQSxLQUFBLE1BQUEsU0FBQSxJQUFBLEdBQUEsRUFBQSxXQUNBLElBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxTQUFBLEVBQ0EsR0FBQSxhQUFBLE1BQUEsR0FBQSxHQUFBLFNBQUEsVUFBQSxHQUFBLEVBQUEsV0FFQSxHQUFBLGFBQUEsTUFBQSxHQUFBLEdBQUEsU0FBQSxVQUFBLEVBQUEsS0FBQSxNQUFBLFNBQUEsS0FBQSxFQUFBLFdBS0EiLCJmaWxlIjoiYmlnZXJ0ZWNoLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogY2JwQW5pbWF0ZWRIZWFkZXIuanMgdjEuMC4wXG4gKiBodHRwOi8vd3d3LmNvZHJvcHMuY29tXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAqXG4gKiBDb3B5cmlnaHQgMjAxMywgQ29kcm9wc1xuICogaHR0cDovL3d3dy5jb2Ryb3BzLmNvbVxuICovXG5cbnZhciBpc0lFID0gZnVuY3Rpb24odmVyKXtcbiAgdmFyIGIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdiJylcbiAgYi5pbm5lckhUTUwgPSAnPCEtLVtpZiBJRSAnICsgdmVyICsgJ10+PGk+PC9pPjwhW2VuZGlmXS0tPidcbiAgcmV0dXJuIGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2knKS5sZW5ndGggPT09IDFcbn1cblxuaWYoaXNJRSg3KSl7XG4gIGFsZXJ0KFwi5L2g55qE5rWP6KeI5Zmo54mI5pys5aSq5L2O77yM6K+35bC95b+r5Y2H57qnLOS7peS+v+iOt+W+l+abtOWlveeahOa1j+iniOS9k+mqjFwiKTtcbn0gZWxzZSB7XG4gIHZhciBhbmltYXRlZEhlYWRlciA9IChmdW5jdGlvbigpIHtcblxuICAgIHZhciBkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuICAgICAgbmF2YmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5uYXZiYXInICksXG4gICAgICBkaWRTY3JvbGwgPSBmYWxzZSxcbiAgICAgIGNoYW5nZUhlYWRlck9uID0gMzEyO1xuXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ3Njcm9sbCcsIGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICAgICAgICBpZiggIWRpZFNjcm9sbCApIHtcbiAgICAgICAgICAgIGRpZFNjcm9sbCA9IHRydWU7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCBzY3JvbGxQYWdlLCAyNTAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGZhbHNlICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cuYXR0YWNoRXZlbnQoICdvbnNjcm9sbCcsIGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICAgICAgICBpZiAoICFkaWRTY3JvbGwgKSB7XG4gICAgICAgICAgICBkaWRTY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgc2V0VGltZW91dCggc2Nyb2xsUGFnZSwgMjUwICk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY3JvbGxQYWdlKCkge1xuICAgICAgdmFyIHN5ID0gc2Nyb2xsWSgpO1xuICAgICAgaWYgKCBzeSA+PSBjaGFuZ2VIZWFkZXJPbiApIHtcbiAgICAgICAgY2xhc3NpZS5hZGQoIG5hdmJhciwgJ25hdmJhci1waW5uZWQnICk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY2xhc3NpZS5yZW1vdmUoIG5hdmJhciwgJ25hdmJhci1waW5uZWQnICk7XG4gICAgICB9XG5cbiAgICAgIGRpZFNjcm9sbCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjcm9sbFkoKSB7XG4gICAgICByZXR1cm4gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY0VsZW0uc2Nyb2xsVG9wO1xuICAgIH1cblxuICAgIGlmICggZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5ob21lLXRlbXBsYXRlJyApICkge1xuICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPiA3NDAgKSB7XG4gICAgICAgIGluaXQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuY2F0ZWdvcnktdGVtcGxhdGUnICkgKSB7XG4gICAgICBpZiAoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuYXJjaGl2ZS10ZW1wbGF0ZScgKSApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPiA3NDAgKSB7XG4gICAgICAgICAgaW5pdCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmF1dGhvci10ZW1wbGF0ZScgKSApIHtcbiAgICAgIGlmICggZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5hcmNoaXZlLXRlbXBsYXRlJyApICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA+IDc0MCApIHtcbiAgICAgICAgICBpbml0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgfSkoKTtcbn1cblxuXG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgQXNodSBvbiAyMy8xMC8xNC5cbiAqL1xuXG4vKiFcbiAqIGNsYXNzaWUgdjEuMC4xXG4gKiBjbGFzcyBoZWxwZXIgZnVuY3Rpb25zXG4gKiBmcm9tIGJvbnpvIGh0dHBzOi8vZ2l0aHViLmNvbS9kZWQvYm9uem9cbiAqIE1JVCBsaWNlbnNlXG4gKlxuICogY2xhc3NpZS5oYXMoIGVsZW0sICdteS1jbGFzcycgKSAtPiB0cnVlL2ZhbHNlXG4gKiBjbGFzc2llLmFkZCggZWxlbSwgJ215LW5ldy1jbGFzcycgKVxuICogY2xhc3NpZS5yZW1vdmUoIGVsZW0sICdteS11bndhbnRlZC1jbGFzcycgKVxuICogY2xhc3NpZS50b2dnbGUoIGVsZW0sICdteS1jbGFzcycgKVxuICovXG5cbi8qanNoaW50IGJyb3dzZXI6IHRydWUsIHN0cmljdDogdHJ1ZSwgdW5kZWY6IHRydWUsIHVudXNlZDogdHJ1ZSAqL1xuLypnbG9iYWwgZGVmaW5lOiBmYWxzZSwgbW9kdWxlOiBmYWxzZSAqL1xuXG4oIGZ1bmN0aW9uKCB3aW5kb3cgKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4vLyBjbGFzcyBoZWxwZXIgZnVuY3Rpb25zIGZyb20gYm9uem8gaHR0cHM6Ly9naXRodWIuY29tL2RlZC9ib256b1xuXG4gIGZ1bmN0aW9uIGNsYXNzUmVnKCBjbGFzc05hbWUgKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoXCIoXnxcXFxccyspXCIgKyBjbGFzc05hbWUgKyBcIihcXFxccyt8JClcIik7XG4gIH1cblxuLy8gY2xhc3NMaXN0IHN1cHBvcnQgZm9yIGNsYXNzIG1hbmFnZW1lbnRcbi8vIGFsdGhvIHRvIGJlIGZhaXIsIHRoZSBhcGkgc3Vja3MgYmVjYXVzZSBpdCB3b24ndCBhY2NlcHQgbXVsdGlwbGUgY2xhc3NlcyBhdCBvbmNlXG4gIHZhciBoYXNDbGFzcywgYWRkQ2xhc3MsIHJlbW92ZUNsYXNzO1xuXG4gIGlmICggJ2NsYXNzTGlzdCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICkge1xuICAgIGhhc0NsYXNzID0gZnVuY3Rpb24oIGVsZW0sIGMgKSB7XG4gICAgICByZXR1cm4gZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoIGMgKTtcbiAgICB9O1xuICAgIGFkZENsYXNzID0gZnVuY3Rpb24oIGVsZW0sIGMgKSB7XG4gICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoIGMgKTtcbiAgICB9O1xuICAgIHJlbW92ZUNsYXNzID0gZnVuY3Rpb24oIGVsZW0sIGMgKSB7XG4gICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoIGMgKTtcbiAgICB9O1xuICB9XG4gIGVsc2Uge1xuICAgIGhhc0NsYXNzID0gZnVuY3Rpb24oIGVsZW0sIGMgKSB7XG4gICAgICByZXR1cm4gY2xhc3NSZWcoIGMgKS50ZXN0KCBlbGVtLmNsYXNzTmFtZSApO1xuICAgIH07XG4gICAgYWRkQ2xhc3MgPSBmdW5jdGlvbiggZWxlbSwgYyApIHtcbiAgICAgIGlmICggIWhhc0NsYXNzKCBlbGVtLCBjICkgKSB7XG4gICAgICAgIGVsZW0uY2xhc3NOYW1lID0gZWxlbS5jbGFzc05hbWUgKyAnICcgKyBjO1xuICAgICAgfVxuICAgIH07XG4gICAgcmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiggZWxlbSwgYyApIHtcbiAgICAgIGVsZW0uY2xhc3NOYW1lID0gZWxlbS5jbGFzc05hbWUucmVwbGFjZSggY2xhc3NSZWcoIGMgKSwgJyAnICk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZUNsYXNzKCBlbGVtLCBjICkge1xuICAgIHZhciBmbiA9IGhhc0NsYXNzKCBlbGVtLCBjICkgPyByZW1vdmVDbGFzcyA6IGFkZENsYXNzO1xuICAgIGZuKCBlbGVtLCBjICk7XG4gIH1cblxuICB2YXIgY2xhc3NpZSA9IHtcbiAgICAvLyBmdWxsIG5hbWVzXG4gICAgaGFzQ2xhc3M6IGhhc0NsYXNzLFxuICAgIGFkZENsYXNzOiBhZGRDbGFzcyxcbiAgICByZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsXG4gICAgdG9nZ2xlQ2xhc3M6IHRvZ2dsZUNsYXNzLFxuICAgIC8vIHNob3J0IG5hbWVzXG4gICAgaGFzOiBoYXNDbGFzcyxcbiAgICBhZGQ6IGFkZENsYXNzLFxuICAgIHJlbW92ZTogcmVtb3ZlQ2xhc3MsXG4gICAgdG9nZ2xlOiB0b2dnbGVDbGFzc1xuICB9O1xuXG4vLyB0cmFuc3BvcnRcbiAgaWYgKCB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKSB7XG4gICAgLy8gQU1EXG4gICAgZGVmaW5lKCBjbGFzc2llICk7XG4gIH0gZWxzZSBpZiAoIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyApIHtcbiAgICAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gY2xhc3NpZTtcbiAgfSBlbHNlIHtcbiAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgIHdpbmRvdy5jbGFzc2llID0gY2xhc3NpZTtcbiAgfVxuXG59KSggd2luZG93ICk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IEFzaHUgb24gMjMvMTAvMTQuXG4gKi9cblxualF1ZXJ5KGZ1bmN0aW9uKCQpIHtcbiAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgPCAwKSB7XG4gICAgLy9JRTgg5LiN5pSv5oyBY29uc29sZVxuICAgIGNvbnNvbGUubG9nKFwiXl9eIOaDs+WKoOWFpeeslOaIiOenkeaKgOW8gOWPkeWboumYn++8n+ivt+WPkemAgemCruS7tuWIsCBsaXV4aW5nQG1laXp1LmNvbVwiKTtcbiAgfVxuXG4gIGlmKCQoXCJpbWcubGF6eVwiKSAmJiAkKFwiaW1nLmxhenlcIikubGVuZ3RoID4gMClcbiAgICAkKFwiaW1nLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgZWZmZWN0OiBcImZhZGVJblwiLFxuICAgICAgdGhyZXNob2xkIDogNTAwXG4gICAgfSk7XG5cbiAgJChkb2N1bWVudCkucmVhZHkoIGZ1bmN0aW9uKCkge1xuICAgIHZhciBxcmNvZGUgPSAkKFwiLnFyY29kZVwiKTtcbiAgICAkKFwiLmljb24td2VjaGF0XCIpLmhvdmVyKGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgcG9zID0gJCh0aGlzKS5wb3NpdGlvbigpO1xuICAgICAgcXJjb2RlLmNzcyhcImxlZnRcIiwgKCQod2luZG93KS53aWR0aCgpLXFyY29kZS53aWR0aCgpKS8yKTtcbiAgICAgIHFyY29kZS5jc3MoXCJ0b3BcIiwgcG9zLnRvcC0yNzApO1xuICAgICAgcXJjb2RlLmZhZGVJbigpLnNob3coKTtcbiAgICB9LGZ1bmN0aW9uKCl7XG4gICAgICBxcmNvZGUuaGlkZSgpO1xuICAgIH0pO1xuICB9KTtcbn0pOyIsIi8qISBMYXp5IExvYWQgMS45LjMgLSBNSVQgbGljZW5zZSAtIENvcHlyaWdodCAyMDEwLTIwMTMgTWlrYSBUdXVwb2xhICovXG4hZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YShiKTthLmZuLmxhenlsb2FkPWZ1bmN0aW9uKGYpe2Z1bmN0aW9uIGcoKXt2YXIgYj0wO2kuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyk7aWYoIWouc2tpcF9pbnZpc2libGV8fGMuaXMoXCI6dmlzaWJsZVwiKSlpZihhLmFib3ZldGhldG9wKHRoaXMsail8fGEubGVmdG9mYmVnaW4odGhpcyxqKSk7ZWxzZSBpZihhLmJlbG93dGhlZm9sZCh0aGlzLGopfHxhLnJpZ2h0b2Zmb2xkKHRoaXMsaikpe2lmKCsrYj5qLmZhaWx1cmVfbGltaXQpcmV0dXJuITF9ZWxzZSBjLnRyaWdnZXIoXCJhcHBlYXJcIiksYj0wfSl9dmFyIGgsaT10aGlzLGo9e3RocmVzaG9sZDowLGZhaWx1cmVfbGltaXQ6MCxldmVudDpcInNjcm9sbFwiLGVmZmVjdDpcInNob3dcIixjb250YWluZXI6YixkYXRhX2F0dHJpYnV0ZTpcIm9yaWdpbmFsXCIsc2tpcF9pbnZpc2libGU6ITAsYXBwZWFyOm51bGwsbG9hZDpudWxsLHBsYWNlaG9sZGVyOlwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFCQ0FZQUFBQWZGY1NKQUFBQUFYTlNSMElBcnM0YzZRQUFBQVJuUVUxQkFBQ3hqd3Y4WVFVQUFBQUpjRWhaY3dBQURzUUFBQTdFQVpVckRoc0FBQUFOU1VSQlZCaFhZemg4K1BCL0FBZmZBMG5OUHVDTEFBQUFBRWxGVGtTdVFtQ0NcIn07cmV0dXJuIGYmJihkIT09Zi5mYWlsdXJlbGltaXQmJihmLmZhaWx1cmVfbGltaXQ9Zi5mYWlsdXJlbGltaXQsZGVsZXRlIGYuZmFpbHVyZWxpbWl0KSxkIT09Zi5lZmZlY3RzcGVlZCYmKGYuZWZmZWN0X3NwZWVkPWYuZWZmZWN0c3BlZWQsZGVsZXRlIGYuZWZmZWN0c3BlZWQpLGEuZXh0ZW5kKGosZikpLGg9ai5jb250YWluZXI9PT1kfHxqLmNvbnRhaW5lcj09PWI/ZTphKGouY29udGFpbmVyKSwwPT09ai5ldmVudC5pbmRleE9mKFwic2Nyb2xsXCIpJiZoLmJpbmQoai5ldmVudCxmdW5jdGlvbigpe3JldHVybiBnKCl9KSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9YShiKTtiLmxvYWRlZD0hMSwoYy5hdHRyKFwic3JjXCIpPT09ZHx8Yy5hdHRyKFwic3JjXCIpPT09ITEpJiZjLmlzKFwiaW1nXCIpJiZjLmF0dHIoXCJzcmNcIixqLnBsYWNlaG9sZGVyKSxjLm9uZShcImFwcGVhclwiLGZ1bmN0aW9uKCl7aWYoIXRoaXMubG9hZGVkKXtpZihqLmFwcGVhcil7dmFyIGQ9aS5sZW5ndGg7ai5hcHBlYXIuY2FsbChiLGQsail9YShcIjxpbWcgLz5cIikuYmluZChcImxvYWRcIixmdW5jdGlvbigpe3ZhciBkPWMuYXR0cihcImRhdGEtXCIrai5kYXRhX2F0dHJpYnV0ZSk7Yy5oaWRlKCksYy5pcyhcImltZ1wiKT9jLmF0dHIoXCJzcmNcIixkKTpjLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIixcInVybCgnXCIrZCtcIicpXCIpLGNbai5lZmZlY3RdKGouZWZmZWN0X3NwZWVkKSxiLmxvYWRlZD0hMDt2YXIgZT1hLmdyZXAoaSxmdW5jdGlvbihhKXtyZXR1cm4hYS5sb2FkZWR9KTtpZihpPWEoZSksai5sb2FkKXt2YXIgZj1pLmxlbmd0aDtqLmxvYWQuY2FsbChiLGYsail9fSkuYXR0cihcInNyY1wiLGMuYXR0cihcImRhdGEtXCIrai5kYXRhX2F0dHJpYnV0ZSkpfX0pLDAhPT1qLmV2ZW50LmluZGV4T2YoXCJzY3JvbGxcIikmJmMuYmluZChqLmV2ZW50LGZ1bmN0aW9uKCl7Yi5sb2FkZWR8fGMudHJpZ2dlcihcImFwcGVhclwiKX0pfSksZS5iaW5kKFwicmVzaXplXCIsZnVuY3Rpb24oKXtnKCl9KSwvKD86aXBob25lfGlwb2R8aXBhZCkuKm9zIDUvZ2kudGVzdChuYXZpZ2F0b3IuYXBwVmVyc2lvbikmJmUuYmluZChcInBhZ2VzaG93XCIsZnVuY3Rpb24oYil7Yi5vcmlnaW5hbEV2ZW50JiZiLm9yaWdpbmFsRXZlbnQucGVyc2lzdGVkJiZpLmVhY2goZnVuY3Rpb24oKXthKHRoaXMpLnRyaWdnZXIoXCJhcHBlYXJcIil9KX0pLGEoYykucmVhZHkoZnVuY3Rpb24oKXtnKCl9KSx0aGlzfSxhLmJlbG93dGhlZm9sZD1mdW5jdGlvbihjLGYpe3ZhciBnO3JldHVybiBnPWYuY29udGFpbmVyPT09ZHx8Zi5jb250YWluZXI9PT1iPyhiLmlubmVySGVpZ2h0P2IuaW5uZXJIZWlnaHQ6ZS5oZWlnaHQoKSkrZS5zY3JvbGxUb3AoKTphKGYuY29udGFpbmVyKS5vZmZzZXQoKS50b3ArYShmLmNvbnRhaW5lcikuaGVpZ2h0KCksZzw9YShjKS5vZmZzZXQoKS50b3AtZi50aHJlc2hvbGR9LGEucmlnaHRvZmZvbGQ9ZnVuY3Rpb24oYyxmKXt2YXIgZztyZXR1cm4gZz1mLmNvbnRhaW5lcj09PWR8fGYuY29udGFpbmVyPT09Yj9lLndpZHRoKCkrZS5zY3JvbGxMZWZ0KCk6YShmLmNvbnRhaW5lcikub2Zmc2V0KCkubGVmdCthKGYuY29udGFpbmVyKS53aWR0aCgpLGc8PWEoYykub2Zmc2V0KCkubGVmdC1mLnRocmVzaG9sZH0sYS5hYm92ZXRoZXRvcD1mdW5jdGlvbihjLGYpe3ZhciBnO3JldHVybiBnPWYuY29udGFpbmVyPT09ZHx8Zi5jb250YWluZXI9PT1iP2Uuc2Nyb2xsVG9wKCk6YShmLmNvbnRhaW5lcikub2Zmc2V0KCkudG9wLGc+PWEoYykub2Zmc2V0KCkudG9wK2YudGhyZXNob2xkK2EoYykuaGVpZ2h0KCl9LGEubGVmdG9mYmVnaW49ZnVuY3Rpb24oYyxmKXt2YXIgZztyZXR1cm4gZz1mLmNvbnRhaW5lcj09PWR8fGYuY29udGFpbmVyPT09Yj9lLnNjcm9sbExlZnQoKTphKGYuY29udGFpbmVyKS5vZmZzZXQoKS5sZWZ0LGc+PWEoYykub2Zmc2V0KCkubGVmdCtmLnRocmVzaG9sZCthKGMpLndpZHRoKCl9LGEuaW52aWV3cG9ydD1mdW5jdGlvbihiLGMpe3JldHVybiEoYS5yaWdodG9mZm9sZChiLGMpfHxhLmxlZnRvZmJlZ2luKGIsYyl8fGEuYmVsb3d0aGVmb2xkKGIsYyl8fGEuYWJvdmV0aGV0b3AoYixjKSl9LGEuZXh0ZW5kKGEuZXhwcltcIjpcIl0se1wiYmVsb3ctdGhlLWZvbGRcIjpmdW5jdGlvbihiKXtyZXR1cm4gYS5iZWxvd3RoZWZvbGQoYix7dGhyZXNob2xkOjB9KX0sXCJhYm92ZS10aGUtdG9wXCI6ZnVuY3Rpb24oYil7cmV0dXJuIWEuYmVsb3d0aGVmb2xkKGIse3RocmVzaG9sZDowfSl9LFwicmlnaHQtb2Ytc2NyZWVuXCI6ZnVuY3Rpb24oYil7cmV0dXJuIGEucmlnaHRvZmZvbGQoYix7dGhyZXNob2xkOjB9KX0sXCJsZWZ0LW9mLXNjcmVlblwiOmZ1bmN0aW9uKGIpe3JldHVybiFhLnJpZ2h0b2Zmb2xkKGIse3RocmVzaG9sZDowfSl9LFwiaW4tdmlld3BvcnRcIjpmdW5jdGlvbihiKXtyZXR1cm4gYS5pbnZpZXdwb3J0KGIse3RocmVzaG9sZDowfSl9LFwiYWJvdmUtdGhlLWZvbGRcIjpmdW5jdGlvbihiKXtyZXR1cm4hYS5iZWxvd3RoZWZvbGQoYix7dGhyZXNob2xkOjB9KX0sXCJyaWdodC1vZi1mb2xkXCI6ZnVuY3Rpb24oYil7cmV0dXJuIGEucmlnaHRvZmZvbGQoYix7dGhyZXNob2xkOjB9KX0sXCJsZWZ0LW9mLWZvbGRcIjpmdW5jdGlvbihiKXtyZXR1cm4hYS5yaWdodG9mZm9sZChiLHt0aHJlc2hvbGQ6MH0pfX0pfShqUXVlcnksd2luZG93LGRvY3VtZW50KTsiLCJ2YXIgTWVudSA9IHtcbiAgc2V0dGluZ3M6IHtcbiAgICBtZW51QnRuOiAkKFwiLmpzLW1lbnVCdG5cIiksXG4gICAgbWVudTogJChcIi5qcy1tZW51XCIpLFxuICAgIGNsb3NlQnRuOiAkKFwiLmpzLWNsb3NlQnRuXCIpLFxuICAgIGJnOiAkKFwiLmpzLUJnXCIpLFxuICAgIGNvbnRhaW5lcjogJChcIi5qcy1tZW51Q29udGFpbmVyXCIpLFxuICAgIGlzT3BlbjogITEsXG4gICAgaXNBbmltYXRpbmc6ICExXG4gIH0sXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmJpbmRVSUFjdGlvbnMoKVxuICB9LFxuICBiaW5kVUlBY3Rpb25zOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xuICAgIGUubWVudUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIE1lbnUudG9nZ2xlKClcbiAgICB9KTtcbiAgICBlLmJnLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgTWVudS5jbG9zZSgpXG4gICAgfSk7XG4gICAgZS5jb250YWluZXIuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBNZW51LmNsb3NlKClcbiAgICB9KTtcbiAgICBlLmNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgTWVudS5jbG9zZSgpXG4gICAgfSk7XG4gICAgJCh3aW5kb3cpLmtleWRvd24oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS53aGljaCA9PT0gMjcgJiYgTWVudS5jbG9zZSgpXG4gICAgfSlcbiAgfSxcbiAgdG9nZ2xlOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xuICAgIGUuaXNPcGVuID8gTWVudS5jbG9zZSgpIDogTWVudS5vcGVuKClcbiAgfSxcbiAgb3BlbjogZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgIGUubWVudS5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgICAgZS5pc0FuaW1hdGluZyA9ICExXG4gICAgfVxuICAgIHZhciBlID0gdGhpcy5zZXR0aW5ncztcbiAgICBpZiAoZS5pc0FuaW1hdGluZyA9PT0gITEpIHtcbiAgICAgICAgZS5pc09wZW4gPSAhMDtcbiAgICAgICAgZS5pc0FuaW1hdGluZyA9ICEwO1xuICAgICAgICBlLm1lbnUuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICBzZXRUaW1lb3V0KHQsIDEwMClcbiAgICB9XG4gIH0sXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gdCgpIHtcbiAgICAgICAgZS5tZW51LmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICBlLmlzQW5pbWF0aW5nID0gITFcbiAgICB9XG4gICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xuICAgIGlmIChlLmlzQW5pbWF0aW5nID09PSAhMSkge1xuICAgICAgICBlLmlzT3BlbiA9ICExO1xuICAgICAgICBlLmlzQW5pbWF0aW5nID0gITA7XG4gICAgICAgIGUubWVudS5yZW1vdmVDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgICAgc2V0VGltZW91dCh0LCAxMjAwKVxuICAgIH1cbiAgfVxufSwgU2VhcmNoID0ge1xuICBzZXR0aW5nczoge1xuICAgICAgdGV4dEJveDogJChcIi50ZXh0Ym94XCIpLFxuICAgICAgc2VhcmNoQnRuOiAkKFwiLmpzLXNlYXJjaEJ0blwiKSxcbiAgICAgIHNlYXJjaDogJChcIi5qcy1zZWFyY2hcIiksXG4gICAgICBjbG9zZUJ0bjogJChcIi5qcy1jbG9zZUJ0blwiKSxcbiAgICAgIGJnOiAkKFwiLmpzLUJnXCIpLFxuICAgICAgY29udGFpbmVyOiAkKFwiLmpzLXNlYXJjaENvbnRhaW5lclwiKSxcbiAgICAgIGlzT3BlbjogITEsXG4gICAgICBpc0FuaW1hdGluZzogITFcbiAgfSxcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5iaW5kVUlBY3Rpb25zKClcbiAgfSxcbiAgYmluZFVJQWN0aW9uczogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlID0gdGhpcy5zZXR0aW5ncztcbiAgICBlLnNlYXJjaEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIFNlYXJjaC50b2dnbGUoKVxuICAgIH0pO1xuICAgIC8vIOWkhOeQhuaQnOe0ouahhumYu+atouWGkuazoVxuICAgIGUudGV4dEJveC5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gICAgZS5iZy5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIFNlYXJjaC5jbG9zZSgpXG4gICAgfSk7XG4gICAgZS5jb250YWluZXIuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBTZWFyY2guY2xvc2UoKVxuICAgIH0pO1xuICAgIGUuY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBTZWFyY2guY2xvc2UoKVxuICAgIH0pO1xuICAgICQod2luZG93KS5rZXlkb3duKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUud2hpY2ggPT09IDI3ICYmIFNlYXJjaC5jbG9zZSgpXG4gICAgfSlcbiAgfSxcbiAgdG9nZ2xlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgICBlLmlzT3BlbiA/IFNlYXJjaC5jbG9zZSgpIDogU2VhcmNoLm9wZW4oKVxuICB9LFxuICBvcGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiB0KCkge1xuICAgICAgICAgIGUuc2VhcmNoLmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgICAgIGUudGV4dEJveC5mb2N1cygpO1xuICAgICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMVxuICAgICAgfVxuICAgICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xuICAgICAgaWYgKGUuaXNBbmltYXRpbmcgPT09ICExKSB7XG4gICAgICAgICAgZS5pc09wZW4gPSAhMDtcbiAgICAgICAgICBlLnNlYXJjaC5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XG4gICAgICAgICAgc2V0VGltZW91dCh0LCAxMDApXG4gICAgICB9XG5cbiAgfSxcbiAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgICAgZS5zZWFyY2guY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgICAgZS5pc0FuaW1hdGluZyA9ICExXG4gICAgICB9XG4gICAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgICBpZiAoZS5pc0FuaW1hdGluZyA9PT0gITEpIHtcbiAgICAgICAgICBlLmlzT3BlbiA9ICExO1xuICAgICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMDtcbiAgICAgICAgICBlLnNlYXJjaC5yZW1vdmVDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KHQsIDEyMDApXG4gICAgICB9XG4gIH1cbn07XG5cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICBNZW51LmluaXQoKTtcbiAgU2VhcmNoLmluaXQoKTtcbn0pO1xuIiwidmFyIHNjcm9sbHRvdG9wPXtcclxuXHJcbiAgICAvL3N0YXJ0bGluZTogSW50ZWdlci4gTnVtYmVyIG9mIHBpeGVscyBmcm9tIHRvcCBvZiBkb2Mgc2Nyb2xsYmFyIGlzIHNjcm9sbGVkIGJlZm9yZSBzaG93aW5nIGNvbnRyb2xcclxuXHJcbiAgICAvL3Njcm9sbHRvOiBLZXl3b3JkIChJbnRlZ2VyLCBvciBcIlNjcm9sbF90b19FbGVtZW50X0lEXCIpLiBIb3cgZmFyIHRvIHNjcm9sbCBkb2N1bWVudCB1cCB3aGVuIGNvbnRyb2wgaXMgY2xpY2tlZCBvbiAoMD10b3ApLlxyXG5cclxuICAgIHNldHRpbmc6IHtzdGFydGxpbmU6MTAwLCBzY3JvbGx0bzogMCwgc2Nyb2xsZHVyYXRpb246MTAwMCwgZmFkZWR1cmF0aW9uOls1MDAsIDEwMF19LFxyXG5cclxuICAgIGNvbnRyb2xIVE1MOiBcIjxkaXYgaWQ9J3RvVG9wJyBjbGFzcz0naWNvbi11cCc+PC9kaXY+XCIsIC8vSFRNTCBmb3IgY29udHJvbCwgd2hpY2ggaXMgYXV0byB3cmFwcGVkIGluIERJViB3LyBJRD1cInRvcGNvbnRyb2xcIlxyXG5cclxuICAgIGNvbnRyb2xhdHRyczoge29mZnNldHg6NSwgb2Zmc2V0eTo1fSwgLy9vZmZzZXQgb2YgY29udHJvbCByZWxhdGl2ZSB0byByaWdodC8gYm90dG9tIG9mIHdpbmRvdyBjb3JuZXJcclxuXHJcbiAgICBhbmNob3JrZXl3b3JkOiAnI3RvcCcsIC8vRW50ZXIgaHJlZiB2YWx1ZSBvZiBIVE1MIGFuY2hvcnMgb24gdGhlIHBhZ2UgdGhhdCBzaG91bGQgYWxzbyBhY3QgYXMgXCJTY3JvbGwgVXBcIiBsaW5rc1xyXG5cclxuIHN0YXRlOiB7aXN2aXNpYmxlOmZhbHNlLCBzaG91bGR2aXNpYmxlOmZhbHNlfSxcclxuXHJcblxyXG4gICAgc2Nyb2xsdXA6ZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmNzc2ZpeGVkc3VwcG9ydCkgLy9pZiBjb250cm9sIGlzIHBvc2l0aW9uZWQgdXNpbmcgSmF2YVNjcmlwdFxyXG5cclxuICAgICAgICAgICAgdGhpcy4kY29udHJvbC5jc3Moe29wYWNpdHk6MH0pIC8vaGlkZSBjb250cm9sIGltbWVkaWF0ZWx5IGFmdGVyIGNsaWNraW5nIGl0XHJcblxyXG4gICAgICAgIHZhciBkZXN0PWlzTmFOKHRoaXMuc2V0dGluZy5zY3JvbGx0byk/IHRoaXMuc2V0dGluZy5zY3JvbGx0byA6IHBhcnNlSW50KHRoaXMuc2V0dGluZy5zY3JvbGx0bylcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBkZXN0PT1cInN0cmluZ1wiICYmIGpRdWVyeSgnIycrZGVzdCkubGVuZ3RoPT0xKSAvL2NoZWNrIGVsZW1lbnQgc2V0IGJ5IHN0cmluZyBleGlzdHNcclxuXHJcbiAgICAgICAgICAgIGRlc3Q9alF1ZXJ5KCcjJytkZXN0KS5vZmZzZXQoKS50b3BcclxuXHJcbiAgICAgICAgZWxzZVxyXG5cclxuICAgICAgICAgICAgZGVzdD0wXHJcblxyXG4gICAgICAgIHRoaXMuJGJvZHkuYW5pbWF0ZSh7c2Nyb2xsVG9wOiBkZXN0fSwgdGhpcy5zZXR0aW5nLnNjcm9sbGR1cmF0aW9uKTtcclxuXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBrZWVwZml4ZWQ6ZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgdmFyICR3aW5kb3c9alF1ZXJ5KHdpbmRvdylcclxuXHJcbiAgICAgICAgdmFyIGNvbnRyb2x4PSR3aW5kb3cuc2Nyb2xsTGVmdCgpICsgJHdpbmRvdy53aWR0aCgpIC0gdGhpcy4kY29udHJvbC53aWR0aCgpIC0gdGhpcy5jb250cm9sYXR0cnMub2Zmc2V0eFxyXG5cclxuICAgICAgICB2YXIgY29udHJvbHk9JHdpbmRvdy5zY3JvbGxUb3AoKSArICR3aW5kb3cuaGVpZ2h0KCkgLSB0aGlzLiRjb250cm9sLmhlaWdodCgpIC0gdGhpcy5jb250cm9sYXR0cnMub2Zmc2V0eVxyXG5cclxuICAgICAgICB0aGlzLiRjb250cm9sLmNzcyh7bGVmdDpjb250cm9seCsncHgnLCB0b3A6Y29udHJvbHkrJ3B4J30pXHJcblxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgdG9nZ2xlY29udHJvbDpmdW5jdGlvbigpe1xyXG5cclxuXHJcblxyXG4gICAgICAgIHZhciBzY3JvbGx0b3A9alF1ZXJ5KHdpbmRvdykuc2Nyb2xsVG9wKClcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmNzc2ZpeGVkc3VwcG9ydClcclxuXHJcbiAgICAgICAgICAgIHRoaXMua2VlcGZpeGVkKClcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5zaG91bGR2aXNpYmxlPShzY3JvbGx0b3A+PXRoaXMuc2V0dGluZy5zdGFydGxpbmUpPyB0cnVlIDogZmFsc2VcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2hvdWxkdmlzaWJsZSAmJiAhdGhpcy5zdGF0ZS5pc3Zpc2libGUpe1xyXG5cclxuICAgICAgICAgICAgdGhpcy4kY29udHJvbC5zdG9wKCkuYW5pbWF0ZSh7b3BhY2l0eToxfSwgdGhpcy5zZXR0aW5nLmZhZGVkdXJhdGlvblswXSlcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaXN2aXNpYmxlPXRydWVcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbHNlIGlmICh0aGlzLnN0YXRlLnNob3VsZHZpc2libGU9PWZhbHNlICYmIHRoaXMuc3RhdGUuaXN2aXNpYmxlKXtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuJGNvbnRyb2wuc3RvcCgpLmFuaW1hdGUoe29wYWNpdHk6MH0sIHRoaXMuc2V0dGluZy5mYWRlZHVyYXRpb25bMV0pXHJcblxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmlzdmlzaWJsZT1mYWxzZVxyXG5cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXQ6ZnVuY3Rpb24oKXtcclxuICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCQpe1xyXG4gICAgICAgICAgICB2YXIgbWFpbm9iaj1zY3JvbGx0b3RvcFxyXG4gICAgICAgICAgICB2YXIgaWVicndzPWRvY3VtZW50LmFsbFxyXG4gICAgICAgICAgICBtYWlub2JqLmNzc2ZpeGVkc3VwcG9ydD0haWVicndzIHx8IGllYnJ3cyAmJiBkb2N1bWVudC5jb21wYXRNb2RlPT1cIkNTUzFDb21wYXRcIiAmJiB3aW5kb3cuWE1MSHR0cFJlcXVlc3QgLy9ub3QgSUUgb3IgSUU3KyBicm93c2VycyBpbiBzdGFuZGFyZHMgbW9kZVxyXG4gICAgICAgICAgICBtYWlub2JqLiRib2R5PSh3aW5kb3cub3BlcmEpPyAoZG9jdW1lbnQuY29tcGF0TW9kZT09XCJDU1MxQ29tcGF0XCI/ICQoJ2h0bWwnKSA6ICQoJ2JvZHknKSkgOiAkKCdodG1sLGJvZHknKVxyXG4gICAgICAgICAgICBtYWlub2JqLiRjb250cm9sPSQoJzxkaXYgaWQ9XCJ0b3Bjb250cm9sXCI+JyttYWlub2JqLmNvbnRyb2xIVE1MKyc8L2Rpdj4nKVxyXG4gICAgICAgICAgICAgICAgLmNzcyh7cG9zaXRpb246bWFpbm9iai5jc3NmaXhlZHN1cHBvcnQ/ICdmaXhlZCcgOiAnYWJzb2x1dGUnLCBib3R0b206bWFpbm9iai5jb250cm9sYXR0cnMub2Zmc2V0eSwgcmlnaHQ6bWFpbm9iai5jb250cm9sYXR0cnMub2Zmc2V0eCwgb3BhY2l0eTowLGN1cnNvcjoncG9pbnRlcid9KVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoe3RpdGxlOidTY3JvbGwgdG8gVG9wJ30pXHJcbiAgICAgICAgICAgICAgICAuY2xpY2soZnVuY3Rpb24oKXttYWlub2JqLnNjcm9sbHVwKCk7IHJldHVybiBmYWxzZX0pXHJcbiAgICAgICAgICAgICAgICAuYXBwZW5kVG8oJ2JvZHknKVxyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuWE1MSHR0cFJlcXVlc3QgJiYgbWFpbm9iai4kY29udHJvbC50ZXh0KCkhPScnKSAvL2xvb3NlIGNoZWNrIGZvciBJRTYgYW5kIGJlbG93LCBwbHVzIHdoZXRoZXIgY29udHJvbCBjb250YWlucyBhbnkgdGV4dFxyXG4gICAgICAgICAgICAgICAgbWFpbm9iai4kY29udHJvbC5jc3Moe3dpZHRoOm1haW5vYmouJGNvbnRyb2wud2lkdGgoKX0pIC8vSUU2LSBzZWVtcyB0byByZXF1aXJlIGFuIGV4cGxpY2l0IHdpZHRoIG9uIGEgRElWIGNvbnRhaW5pbmcgdGV4dFxyXG4gICAgICAgICAgICBtYWlub2JqLnRvZ2dsZWNvbnRyb2woKVxyXG5cclxuJCgnYVtocmVmPVwiJyArIG1haW5vYmouYW5jaG9ya2V5d29yZCArJ1wiXScpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBtYWlub2JqLnNjcm9sbHVwKClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAkKHdpbmRvdykuYmluZCgnc2Nyb2xsIHJlc2l6ZScsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgbWFpbm9iai50b2dnbGVjb250cm9sKClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcbnNjcm9sbHRvdG9wLmluaXQoKTtcclxuIiwiXG4oZnVuY3Rpb24gKCQpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG4gICAgJChcIi5zY3JvbGwtZG93blwiKS5hcmN0aWNfc2Nyb2xsKCk7XG5cbiAgfSk7XG59KGpRdWVyeSkpO1xuXG4oZnVuY3Rpb24gKCQpIHtcbiAgJC5mbi5hcmN0aWNfc2Nyb2xsID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblxuICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgIGVsZW06ICQodGhpcyksXG4gICAgICBzcGVlZDogNTAwXG4gICAgfTtcbiAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgIG9wdGlvbnMuZWxlbS5jbGljayhmdW5jdGlvbihldmVudCl7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyIG9mZnNldCA9ICgkKHRoaXMpLmF0dHIoJ2RhdGEtb2Zmc2V0JykpID8gJCh0aGlzKS5hdHRyKCdkYXRhLW9mZnNldCcpIDogZmFsc2UsXG4gICAgICAgIHBvc2l0aW9uID0gKCQodGhpcykuYXR0cignZGF0YS1wb3NpdGlvbicpKSA/ICQodGhpcykuYXR0cignZGF0YS1wb3NpdGlvbicpIDogZmFsc2U7XG4gICAgICBpZiAob2Zmc2V0KSB7XG4gICAgICAgIHZhciB0b01vdmUgPSBwYXJzZUludChvZmZzZXQpO1xuICAgICAgICAkKCdodG1sLGJvZHknKS5zdG9wKHRydWUsIGZhbHNlKS5hbmltYXRlKHtzY3JvbGxUb3A6ICgkKHRoaXMuaGFzaCkub2Zmc2V0KCkudG9wICsgdG9Nb3ZlKSB9LCBvcHRpb25zLnNwZWVkKTtcbiAgICAgIH0gZWxzZSBpZiAocG9zaXRpb24pIHtcbiAgICAgICAgdmFyIHRvTW92ZSA9IHBhcnNlSW50KHBvc2l0aW9uKTtcbiAgICAgICAgJCgnaHRtbCxib2R5Jykuc3RvcCh0cnVlLCBmYWxzZSkuYW5pbWF0ZSh7c2Nyb2xsVG9wOiB0b01vdmUgfSwgb3B0aW9ucy5zcGVlZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKCdodG1sLGJvZHknKS5zdG9wKHRydWUsIGZhbHNlKS5hbmltYXRlKHtzY3JvbGxUb3A6ICgkKHRoaXMuaGFzaCkub2Zmc2V0KCkudG9wKSB9LCBvcHRpb25zLnNwZWVkKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICB9O1xufSkoalF1ZXJ5KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=