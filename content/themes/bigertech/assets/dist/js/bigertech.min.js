var animatedHeader=function(){function t(){window.addEventListener("scroll",function(){s||(s=!0,setTimeout(e,250))},!1)}function e(){var t=i();t>=c?classie.add(o,"navbar-pinned"):classie.remove(o,"navbar-pinned"),s=!1}function i(){return window.pageYOffset||n.scrollTop}var n=document.documentElement,o=document.querySelector(".navbar"),s=!1,c=312;if(document.querySelector(".home-template")&&document.body.clientWidth>768&&t(),document.querySelector(".category-template")){if(document.querySelector(".archive-template"))return!1;document.body.clientWidth>768&&t()}if(document.querySelector(".author-template")){if(document.querySelector(".archive-template"))return!1;document.body.clientWidth>768&&t()}}();jQuery(function(t){navigator.userAgent.indexOf("MSIE")<0&&console.log("^_^ 想加入笔戈科技开发团队？请发送邮件到 liuxing@meizu.com"),t("img.lazy")&&t("img.lazy").length>0&&t("img.lazy").lazyload({effect:"fadeIn",threshold:300}),t(document).ready(function(){var e=t(".qrcode");t(".icon-wechat").hover(function(){var i=t(this).position();e.css("left",(t(window).width()-e.width())/2),e.css("top",i.top-270),e.fadeIn().show()},function(){e.hide()})})}),!function(t,e,i,n){var o=t(e);t.fn.lazyload=function(s){function c(){var e=0;a.each(function(){var i=t(this);if(!l.skip_invisible||i.is(":visible"))if(t.abovethetop(this,l)||t.leftofbegin(this,l));else if(t.belowthefold(this,l)||t.rightoffold(this,l)){if(++e>l.failure_limit)return!1}else i.trigger("appear"),e=0})}var r,a=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(n!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),n!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),t.extend(l,s)),r=l.container===n||l.container===e?o:t(l.container),0===l.event.indexOf("scroll")&&r.bind(l.event,function(){return c()}),this.each(function(){var e=this,i=t(e);e.loaded=!1,(i.attr("src")===n||i.attr("src")===!1)&&i.is("img")&&i.attr("src",l.placeholder),i.one("appear",function(){if(!this.loaded){if(l.appear){var n=a.length;l.appear.call(e,n,l)}t("<img />").bind("load",function(){var n=i.attr("data-"+l.data_attribute);i.hide(),i.is("img")?i.attr("src",n):i.css("background-image","url('"+n+"')"),i[l.effect](l.effect_speed),e.loaded=!0;var o=t.grep(a,function(t){return!t.loaded});if(a=t(o),l.load){var s=a.length;l.load.call(e,s,l)}}).attr("src",i.attr("data-"+l.data_attribute))}}),0!==l.event.indexOf("scroll")&&i.bind(l.event,function(){e.loaded||i.trigger("appear")})}),o.bind("resize",function(){c()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&o.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&a.each(function(){t(this).trigger("appear")})}),t(i).ready(function(){c()}),this},t.belowthefold=function(i,s){var c;return c=s.container===n||s.container===e?(e.innerHeight?e.innerHeight:o.height())+o.scrollTop():t(s.container).offset().top+t(s.container).height(),c<=t(i).offset().top-s.threshold},t.rightoffold=function(i,s){var c;return c=s.container===n||s.container===e?o.width()+o.scrollLeft():t(s.container).offset().left+t(s.container).width(),c<=t(i).offset().left-s.threshold},t.abovethetop=function(i,s){var c;return c=s.container===n||s.container===e?o.scrollTop():t(s.container).offset().top,c>=t(i).offset().top+s.threshold+t(i).height()},t.leftofbegin=function(i,s){var c;return c=s.container===n||s.container===e?o.scrollLeft():t(s.container).offset().left,c>=t(i).offset().left+s.threshold+t(i).width()},t.inviewport=function(e,i){return!(t.rightoffold(e,i)||t.leftofbegin(e,i)||t.belowthefold(e,i)||t.abovethetop(e,i))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document);var Menu={settings:{menuBtn:$(".js-menuBtn"),menu:$(".js-menu"),closeBtn:$(".js-closeBtn"),bg:$(".js-Bg"),container:$(".js-menuContainer"),isOpen:!1,isAnimating:!1},init:function(){this.bindUIActions()},bindUIActions:function(){var t=this.settings;t.menuBtn.click(function(){Menu.toggle()}),t.bg.click(function(){Menu.close()}),t.container.click(function(){Menu.close()}),t.closeBtn.click(function(){Menu.close()}),$(window).keydown(function(t){27===t.which&&Menu.close()})},toggle:function(){var t=this.settings;t.isOpen?Menu.close():Menu.open()},open:function(){function t(){e.menu.addClass("is-active"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!0,e.isAnimating=!0,e.menu.css("display","block"),setTimeout(t,100))},close:function(){function t(){e.menu.css("display","none"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!1,e.isAnimating=!0,e.menu.removeClass("is-active"),setTimeout(t,1200))}},Search={settings:{textBox:$(".textbox"),searchBtn:$(".js-searchBtn"),search:$(".js-search"),closeBtn:$(".js-closeBtn"),bg:$(".js-Bg"),container:$(".js-searchContainer"),isOpen:!1,isAnimating:!1},init:function(){this.bindUIActions()},bindUIActions:function(){var t=this.settings;t.searchBtn.click(function(){Search.toggle()}),t.textBox.click(function(){return!1}),t.bg.click(function(){Search.close()}),t.container.click(function(){Search.close()}),t.closeBtn.click(function(){Search.close()}),$(window).keydown(function(t){27===t.which&&Search.close()})},toggle:function(){var t=this.settings;t.isOpen?Search.close():Search.open()},open:function(){function t(){e.search.addClass("is-active"),e.textBox.focus(),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!0,e.search.css("display","block"),setTimeout(t,100))},close:function(){function t(){e.search.css("display","none"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!1,e.isAnimating=!0,e.search.removeClass("is-active"),setTimeout(t,1200))}},Tag={settings:{tagBtn:$(".js-tagBtn"),tag:$(".js-tags"),closeBtn:$(".js-closeBtn"),bg:$(".js-Bg"),container:$(".js-tagContainer"),isOpen:!1,isAnimating:!1},init:function(){this.bindUIActions()},bindUIActions:function(){var t=this.settings;t.tagBtn.click(function(){Tag.toggle()}),t.bg.click(function(){Tag.close()}),t.container.click(function(){Tag.close()}),t.closeBtn.click(function(){Tag.close()}),$(window).keydown(function(t){27===t.which&&Tag.close()})},toggle:function(){var t=this.settings;t.isOpen?Tag.close():Tag.open()},open:function(){function t(){e.tag.addClass("is-active"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!0,e.isAnimating=!0,e.tag.css("display","block"),setTimeout(t,100))},close:function(){function t(){e.tag.css("display","none"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!1,e.isAnimating=!0,e.tag.removeClass("is-active"),setTimeout(t,1200))}};$(document).ready(function(){Menu.init(),Search.init(),Tag.init()});var scrolltotop={setting:{startline:100,scrollto:0,scrollduration:1e3,fadeduration:[500,100]},controlHTML:"<div id='toTop' class='icon-up'></div>",controlattrs:{offsetx:5,offsety:5},anchorkeyword:"#top",state:{isvisible:!1,shouldvisible:!1},scrollup:function(){this.cssfixedsupport||this.$control.css({opacity:0});var t=isNaN(this.setting.scrollto)?this.setting.scrollto:parseInt(this.setting.scrollto);t="string"==typeof t&&1==jQuery("#"+t).length?jQuery("#"+t).offset().top:0,this.$body.animate({scrollTop:t},this.setting.scrollduration)},keepfixed:function(){var t=jQuery(window),e=t.scrollLeft()+t.width()-this.$control.width()-this.controlattrs.offsetx,i=t.scrollTop()+t.height()-this.$control.height()-this.controlattrs.offsety;this.$control.css({left:e+"px",top:i+"px"})},togglecontrol:function(){var t=jQuery(window).scrollTop();this.cssfixedsupport||this.keepfixed(),this.state.shouldvisible=t>=this.setting.startline?!0:!1,this.state.shouldvisible&&!this.state.isvisible?(this.$control.stop().animate({opacity:1},this.setting.fadeduration[0]),this.state.isvisible=!0):0==this.state.shouldvisible&&this.state.isvisible&&(this.$control.stop().animate({opacity:0},this.setting.fadeduration[1]),this.state.isvisible=!1)},init:function(){jQuery(document).ready(function(t){var e=scrolltotop,i=document.all;e.cssfixedsupport=!i||i&&"CSS1Compat"==document.compatMode&&window.XMLHttpRequest,e.$body=window.opera?"CSS1Compat"==document.compatMode?t("html"):t("body"):t("html,body"),e.$control=t('<div id="topcontrol">'+e.controlHTML+"</div>").css({position:e.cssfixedsupport?"fixed":"absolute",bottom:e.controlattrs.offsety,right:e.controlattrs.offsetx,opacity:0,cursor:"pointer"}).attr({title:"Scroll to Top"}).click(function(){return e.scrollup(),!1}).appendTo("body"),document.all&&!window.XMLHttpRequest&&""!=e.$control.text()&&e.$control.css({width:e.$control.width()}),e.togglecontrol(),t('a[href="'+e.anchorkeyword+'"]').click(function(){return e.scrollup(),!1}),t(window).bind("scroll resize",function(){e.togglecontrol()})})}};scrolltotop.init(),function(t){"use strict";t(document).ready(function(){t(".scroll-down").arctic_scroll()})}(jQuery),function(t){t.fn.arctic_scroll=function(e){var i={elem:t(this),speed:500},e=t.extend(i,e);e.elem.click(function(i){i.preventDefault();var n=t(this).attr("data-offset")?t(this).attr("data-offset"):!1,o=t(this).attr("data-position")?t(this).attr("data-position"):!1;if(n){var s=parseInt(n);t("html,body").stop(!0,!1).animate({scrollTop:t(this.hash).offset().top+s},e.speed)}else if(o){var s=parseInt(o);t("html,body").stop(!0,!1).animate({scrollTop:s},e.speed)}else t("html,body").stop(!0,!1).animate({scrollTop:t(this.hash).offset().top},e.speed)})}}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGVkSGVhZGVyLmpzIiwiaW5kZXguanMiLCJqcXVlcnkubGF6eWxvYWQubWluLmpzIiwibmF2YmFyLmpzIiwicmV0dXJuVG9wLmpzIiwic2Nyb2xsX2Rvd24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBVUEsR0FBQSxnQkFBQSxXQU9BLFFBQUEsS0FDQSxPQUFBLGlCQUFBLFNBQUEsV0FDQSxJQUNBLEdBQUEsRUFDQSxXQUFBLEVBQUEsUUFFQSxHQUdBLFFBQUEsS0FDQSxHQUFBLEdBQUEsR0FDQSxJQUFBLEVBQ0EsUUFBQSxJQUFBLEVBQUEsaUJBR0EsUUFBQSxPQUFBLEVBQUEsaUJBR0EsR0FBQSxFQUdBLFFBQUEsS0FDQSxNQUFBLFFBQUEsYUFBQSxFQUFBLFVBM0JBLEdBQUEsR0FBQSxTQUFBLGdCQUNBLEVBQUEsU0FBQSxjQUFBLFdBQ0EsR0FBQSxFQUNBLEVBQUEsR0FpQ0EsSUFOQSxTQUFBLGNBQUEsbUJBQ0EsU0FBQSxLQUFBLFlBQUEsS0FDQSxJQUlBLFNBQUEsY0FBQSxzQkFBQSxDQUNBLEdBQUEsU0FBQSxjQUFBLHFCQUNBLE9BQUEsQ0FFQSxVQUFBLEtBQUEsWUFBQSxLQUNBLElBS0EsR0FBQSxTQUFBLGNBQUEsb0JBQUEsQ0FDQSxHQUFBLFNBQUEsY0FBQSxxQkFDQSxPQUFBLENBRUEsVUFBQSxLQUFBLFlBQUEsS0FDQSxPQy9EQSxRQUFBLFNBQUEsR0FDQSxVQUFBLFVBQUEsUUFBQSxRQUFBLEdBRUEsUUFBQSxJQUFBLDRDQUdBLEVBQUEsYUFBQSxFQUFBLFlBQUEsT0FBQSxHQUNBLEVBQUEsWUFBQSxVQUNBLE9BQUEsU0FDQSxVQUFBLE1BR0EsRUFBQSxVQUFBLE1BQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxVQUNBLEdBQUEsZ0JBQUEsTUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsVUFDQSxHQUFBLElBQUEsUUFBQSxFQUFBLFFBQUEsUUFBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLElBQUEsTUFBQSxFQUFBLElBQUEsS0FDQSxFQUFBLFNBQUEsUUFDQSxXQUNBLEVBQUEsY0NuQkEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLFNBQUEsU0FBQSxHQUFBLFFBQUEsS0FBQSxHQUFBLEdBQUEsQ0FBQSxHQUFBLEtBQUEsV0FBQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEtBQUEsRUFBQSxnQkFBQSxFQUFBLEdBQUEsWUFBQSxHQUFBLEVBQUEsWUFBQSxLQUFBLElBQUEsRUFBQSxZQUFBLEtBQUEsUUFBQSxJQUFBLEVBQUEsYUFBQSxLQUFBLElBQUEsRUFBQSxZQUFBLEtBQUEsSUFBQSxLQUFBLEVBQUEsRUFBQSxjQUFBLE9BQUEsTUFBQSxHQUFBLFFBQUEsVUFBQSxFQUFBLElBQUEsR0FBQSxHQUFBLEVBQUEsS0FBQSxHQUFBLFVBQUEsRUFBQSxjQUFBLEVBQUEsTUFBQSxTQUFBLE9BQUEsT0FBQSxVQUFBLEVBQUEsZUFBQSxXQUFBLGdCQUFBLEVBQUEsT0FBQSxLQUFBLEtBQUEsS0FBQSxZQUFBLHlMQUFBLE9BQUEsS0FBQSxJQUFBLEVBQUEsZUFBQSxFQUFBLGNBQUEsRUFBQSxtQkFBQSxHQUFBLGNBQUEsSUFBQSxFQUFBLGNBQUEsRUFBQSxhQUFBLEVBQUEsa0JBQUEsR0FBQSxhQUFBLEVBQUEsT0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLFlBQUEsR0FBQSxFQUFBLFlBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxXQUFBLElBQUEsRUFBQSxNQUFBLFFBQUEsV0FBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLFdBQUEsTUFBQSxPQUFBLEtBQUEsS0FBQSxXQUFBLEdBQUEsR0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxHQUFBLEVBQUEsS0FBQSxTQUFBLEdBQUEsRUFBQSxLQUFBLFVBQUEsSUFBQSxFQUFBLEdBQUEsUUFBQSxFQUFBLEtBQUEsTUFBQSxFQUFBLGFBQUEsRUFBQSxJQUFBLFNBQUEsV0FBQSxJQUFBLEtBQUEsT0FBQSxDQUFBLEdBQUEsRUFBQSxPQUFBLENBQUEsR0FBQSxHQUFBLEVBQUEsTUFBQSxHQUFBLE9BQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLFdBQUEsS0FBQSxPQUFBLFdBQUEsR0FBQSxHQUFBLEVBQUEsS0FBQSxRQUFBLEVBQUEsZUFBQSxHQUFBLE9BQUEsRUFBQSxHQUFBLE9BQUEsRUFBQSxLQUFBLE1BQUEsR0FBQSxFQUFBLElBQUEsbUJBQUEsUUFBQSxFQUFBLE1BQUEsRUFBQSxFQUFBLFFBQUEsRUFBQSxjQUFBLEVBQUEsUUFBQSxDQUFBLElBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxTQUFBLEdBQUEsT0FBQSxFQUFBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEtBQUEsQ0FBQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEdBQUEsS0FBQSxLQUFBLEVBQUEsRUFBQSxNQUFBLEtBQUEsTUFBQSxFQUFBLEtBQUEsUUFBQSxFQUFBLG9CQUFBLElBQUEsRUFBQSxNQUFBLFFBQUEsV0FBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLFdBQUEsRUFBQSxRQUFBLEVBQUEsUUFBQSxjQUFBLEVBQUEsS0FBQSxTQUFBLFdBQUEsTUFBQSwrQkFBQSxLQUFBLFVBQUEsYUFBQSxFQUFBLEtBQUEsV0FBQSxTQUFBLEdBQUEsRUFBQSxlQUFBLEVBQUEsY0FBQSxXQUFBLEVBQUEsS0FBQSxXQUFBLEVBQUEsTUFBQSxRQUFBLGNBQUEsRUFBQSxHQUFBLE1BQUEsV0FBQSxNQUFBLE1BQUEsRUFBQSxhQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEdBQUEsRUFBQSxZQUFBLEdBQUEsRUFBQSxZQUFBLEdBQUEsRUFBQSxZQUFBLEVBQUEsWUFBQSxFQUFBLFVBQUEsRUFBQSxZQUFBLEVBQUEsRUFBQSxXQUFBLFNBQUEsSUFBQSxFQUFBLEVBQUEsV0FBQSxTQUFBLEdBQUEsRUFBQSxHQUFBLFNBQUEsSUFBQSxFQUFBLFdBQUEsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEdBQUEsRUFBQSxZQUFBLEdBQUEsRUFBQSxZQUFBLEVBQUEsRUFBQSxRQUFBLEVBQUEsYUFBQSxFQUFBLEVBQUEsV0FBQSxTQUFBLEtBQUEsRUFBQSxFQUFBLFdBQUEsUUFBQSxHQUFBLEVBQUEsR0FBQSxTQUFBLEtBQUEsRUFBQSxXQUFBLEVBQUEsWUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUEsWUFBQSxHQUFBLEVBQUEsWUFBQSxFQUFBLEVBQUEsWUFBQSxFQUFBLEVBQUEsV0FBQSxTQUFBLElBQUEsR0FBQSxFQUFBLEdBQUEsU0FBQSxJQUFBLEVBQUEsVUFBQSxFQUFBLEdBQUEsVUFBQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLFlBQUEsR0FBQSxFQUFBLFlBQUEsRUFBQSxFQUFBLGFBQUEsRUFBQSxFQUFBLFdBQUEsU0FBQSxLQUFBLEdBQUEsRUFBQSxHQUFBLFNBQUEsS0FBQSxFQUFBLFVBQUEsRUFBQSxHQUFBLFNBQUEsRUFBQSxXQUFBLFNBQUEsRUFBQSxHQUFBLFFBQUEsRUFBQSxZQUFBLEVBQUEsSUFBQSxFQUFBLFlBQUEsRUFBQSxJQUFBLEVBQUEsYUFBQSxFQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLE1BQUEsaUJBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxhQUFBLEdBQUEsVUFBQSxLQUFBLGdCQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsYUFBQSxHQUFBLFVBQUEsS0FBQSxrQkFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFlBQUEsR0FBQSxVQUFBLEtBQUEsaUJBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxZQUFBLEdBQUEsVUFBQSxLQUFBLGNBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxXQUFBLEdBQUEsVUFBQSxLQUFBLGlCQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsYUFBQSxHQUFBLFVBQUEsS0FBQSxnQkFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFlBQUEsR0FBQSxVQUFBLEtBQUEsZUFBQSxTQUFBLEdBQUEsT0FBQSxFQUFBLFlBQUEsR0FBQSxVQUFBLFFBQUEsT0FBQSxPQUFBLFNDREEsSUFBQSxPQUNBLFVBQ0EsUUFBQSxFQUFBLGVBQ0EsS0FBQSxFQUFBLFlBQ0EsU0FBQSxFQUFBLGdCQUNBLEdBQUEsRUFBQSxVQUNBLFVBQUEsRUFBQSxxQkFDQSxRQUFBLEVBQ0EsYUFBQSxHQUVBLEtBQUEsV0FDQSxLQUFBLGlCQUVBLGNBQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsUUFBQSxNQUFBLFdBQ0EsS0FBQSxXQUVBLEVBQUEsR0FBQSxNQUFBLFdBQ0EsS0FBQSxVQUVBLEVBQUEsVUFBQSxNQUFBLFdBQ0EsS0FBQSxVQUVBLEVBQUEsU0FBQSxNQUFBLFdBQ0EsS0FBQSxVQUVBLEVBQUEsUUFBQSxRQUFBLFNBQUEsR0FDQSxLQUFBLEVBQUEsT0FBQSxLQUFBLFdBR0EsT0FBQSxXQUNBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxPQUFBLEtBQUEsUUFBQSxLQUFBLFFBRUEsS0FBQSxXQUNBLFFBQUEsS0FDQSxFQUFBLEtBQUEsU0FBQSxhQUNBLEVBQUEsYUFBQSxFQUVBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxlQUFBLElBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxhQUFBLEVBQ0EsRUFBQSxLQUFBLElBQUEsVUFBQSxTQUNBLFdBQUEsRUFBQSxPQUdBLE1BQUEsV0FDQSxRQUFBLEtBQ0EsRUFBQSxLQUFBLElBQUEsVUFBQSxRQUNBLEVBQUEsYUFBQSxFQUVBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxlQUFBLElBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxhQUFBLEVBQ0EsRUFBQSxLQUFBLFlBQUEsYUFDQSxXQUFBLEVBQUEsU0FHQSxRQUNBLFVBQ0EsUUFBQSxFQUFBLFlBQ0EsVUFBQSxFQUFBLGlCQUNBLE9BQUEsRUFBQSxjQUNBLFNBQUEsRUFBQSxnQkFDQSxHQUFBLEVBQUEsVUFDQSxVQUFBLEVBQUEsdUJBQ0EsUUFBQSxFQUNBLGFBQUEsR0FFQSxLQUFBLFdBQ0EsS0FBQSxpQkFFQSxjQUFBLFdBQ0EsR0FBQSxHQUFBLEtBQUEsUUFDQSxHQUFBLFVBQUEsTUFBQSxXQUNBLE9BQUEsV0FHQSxFQUFBLFFBQUEsTUFBQSxXQUNBLE9BQUEsSUFFQSxFQUFBLEdBQUEsTUFBQSxXQUNBLE9BQUEsVUFFQSxFQUFBLFVBQUEsTUFBQSxXQUNBLE9BQUEsVUFFQSxFQUFBLFNBQUEsTUFBQSxXQUNBLE9BQUEsVUFFQSxFQUFBLFFBQUEsUUFBQSxTQUFBLEdBQ0EsS0FBQSxFQUFBLE9BQUEsT0FBQSxXQUdBLE9BQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsT0FBQSxPQUFBLFFBQUEsT0FBQSxRQUVBLEtBQUEsV0FDQSxRQUFBLEtBQ0EsRUFBQSxPQUFBLFNBQUEsYUFDQSxFQUFBLFFBQUEsUUFDQSxFQUFBLGFBQUEsRUFFQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsZUFBQSxJQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsT0FBQSxJQUFBLFVBQUEsU0FDQSxXQUFBLEVBQUEsT0FJQSxNQUFBLFdBQ0EsUUFBQSxLQUNBLEVBQUEsT0FBQSxJQUFBLFVBQUEsUUFDQSxFQUFBLGFBQUEsRUFFQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsZUFBQSxJQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsYUFBQSxFQUNBLEVBQUEsT0FBQSxZQUFBLGFBQ0EsV0FBQSxFQUFBLFNBS0EsS0FDQSxVQUNBLE9BQUEsRUFBQSxjQUNBLElBQUEsRUFBQSxZQUNBLFNBQUEsRUFBQSxnQkFDQSxHQUFBLEVBQUEsVUFDQSxVQUFBLEVBQUEsb0JBQ0EsUUFBQSxFQUNBLGFBQUEsR0FFQSxLQUFBLFdBQ0EsS0FBQSxpQkFFQSxjQUFBLFdBQ0EsR0FBQSxHQUFBLEtBQUEsUUFDQSxHQUFBLE9BQUEsTUFBQSxXQUNBLElBQUEsV0FFQSxFQUFBLEdBQUEsTUFBQSxXQUNBLElBQUEsVUFFQSxFQUFBLFVBQUEsTUFBQSxXQUNBLElBQUEsVUFFQSxFQUFBLFNBQUEsTUFBQSxXQUNBLElBQUEsVUFFQSxFQUFBLFFBQUEsUUFBQSxTQUFBLEdBQ0EsS0FBQSxFQUFBLE9BQUEsSUFBQSxXQUdBLE9BQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsT0FBQSxJQUFBLFFBQUEsSUFBQSxRQUVBLEtBQUEsV0FDQSxRQUFBLEtBQ0EsRUFBQSxJQUFBLFNBQUEsYUFDQSxFQUFBLGFBQUEsRUFFQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsZUFBQSxJQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsYUFBQSxFQUNBLEVBQUEsSUFBQSxJQUFBLFVBQUEsU0FDQSxXQUFBLEVBQUEsT0FHQSxNQUFBLFdBQ0EsUUFBQSxLQUNBLEVBQUEsSUFBQSxJQUFBLFVBQUEsUUFDQSxFQUFBLGFBQUEsRUFFQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsZUFBQSxJQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsYUFBQSxFQUNBLEVBQUEsSUFBQSxZQUFBLGFBQ0EsV0FBQSxFQUFBLFFBS0EsR0FBQSxVQUFBLE1BQUEsV0FDQSxLQUFBLE9BQ0EsT0FBQSxPQUNBLElBQUEsUUNwTUEsSUFBQSxjQU1BLFNBQUEsVUFBQSxJQUFBLFNBQUEsRUFBQSxlQUFBLElBQUEsY0FBQSxJQUFBLE1BRUEsWUFBQSx5Q0FFQSxjQUFBLFFBQUEsRUFBQSxRQUFBLEdBRUEsY0FBQSxPQUVBLE9BQUEsV0FBQSxFQUFBLGVBQUEsR0FHQSxTQUFBLFdBRUEsS0FBQSxpQkFFQSxLQUFBLFNBQUEsS0FBQSxRQUFBLEdBRUEsSUFBQSxHQUFBLE1BQUEsS0FBQSxRQUFBLFVBQUEsS0FBQSxRQUFBLFNBQUEsU0FBQSxLQUFBLFFBQUEsU0FJQSxHQUZBLGdCQUFBLElBQUEsR0FBQSxPQUFBLElBQUEsR0FBQSxPQUVBLE9BQUEsSUFBQSxHQUFBLFNBQUEsSUFJQSxFQUVBLEtBQUEsTUFBQSxTQUFBLFVBQUEsR0FBQSxLQUFBLFFBQUEsaUJBS0EsVUFBQSxXQUVBLEdBQUEsR0FBQSxPQUFBLFFBRUEsRUFBQSxFQUFBLGFBQUEsRUFBQSxRQUFBLEtBQUEsU0FBQSxRQUFBLEtBQUEsYUFBQSxRQUVBLEVBQUEsRUFBQSxZQUFBLEVBQUEsU0FBQSxLQUFBLFNBQUEsU0FBQSxLQUFBLGFBQUEsT0FFQSxNQUFBLFNBQUEsS0FBQSxLQUFBLEVBQUEsS0FBQSxJQUFBLEVBQUEsUUFLQSxjQUFBLFdBSUEsR0FBQSxHQUFBLE9BQUEsUUFBQSxXQUVBLE1BQUEsaUJBRUEsS0FBQSxZQUVBLEtBQUEsTUFBQSxjQUFBLEdBQUEsS0FBQSxRQUFBLFdBQUEsR0FBQSxFQUVBLEtBQUEsTUFBQSxnQkFBQSxLQUFBLE1BQUEsV0FFQSxLQUFBLFNBQUEsT0FBQSxTQUFBLFFBQUEsR0FBQSxLQUFBLFFBQUEsYUFBQSxJQUVBLEtBQUEsTUFBQSxXQUFBLEdBSUEsR0FBQSxLQUFBLE1BQUEsZUFBQSxLQUFBLE1BQUEsWUFFQSxLQUFBLFNBQUEsT0FBQSxTQUFBLFFBQUEsR0FBQSxLQUFBLFFBQUEsYUFBQSxJQUVBLEtBQUEsTUFBQSxXQUFBLElBS0EsS0FBQSxXQUNBLE9BQUEsVUFBQSxNQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsWUFDQSxFQUFBLFNBQUEsR0FDQSxHQUFBLGlCQUFBLEdBQUEsR0FBQSxjQUFBLFNBQUEsWUFBQSxPQUFBLGVBQ0EsRUFBQSxNQUFBLE9BQUEsTUFBQSxjQUFBLFNBQUEsV0FBQSxFQUFBLFFBQUEsRUFBQSxRQUFBLEVBQUEsYUFDQSxFQUFBLFNBQUEsRUFBQSx3QkFBQSxFQUFBLFlBQUEsVUFDQSxLQUFBLFNBQUEsRUFBQSxnQkFBQSxRQUFBLFdBQUEsT0FBQSxFQUFBLGFBQUEsUUFBQSxNQUFBLEVBQUEsYUFBQSxRQUFBLFFBQUEsRUFBQSxPQUFBLFlBQ0EsTUFBQSxNQUFBLGtCQUNBLE1BQUEsV0FBQSxNQUFBLEdBQUEsWUFBQSxJQUNBLFNBQUEsUUFDQSxTQUFBLE1BQUEsT0FBQSxnQkFBQSxJQUFBLEVBQUEsU0FBQSxRQUNBLEVBQUEsU0FBQSxLQUFBLE1BQUEsRUFBQSxTQUFBLFVBQ0EsRUFBQSxnQkFFQSxFQUFBLFdBQUEsRUFBQSxjQUFBLE1BQUEsTUFBQSxXQUVBLE1BREEsR0FBQSxZQUNBLElBRUEsRUFBQSxRQUFBLEtBQUEsZ0JBQUEsV0FDQSxFQUFBLHFCQUtBLGFBQUEsT0N4R0EsU0FBQSxHQUNBLFlBQ0EsR0FBQSxVQUFBLE1BQUEsV0FDQSxFQUFBLGdCQUFBLG1CQUdBLFFBRUEsU0FBQSxHQUNBLEVBQUEsR0FBQSxjQUFBLFNBQUEsR0FFQSxHQUFBLElBQ0EsS0FBQSxFQUFBLE1BQ0EsTUFBQSxLQUVBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFFQSxHQUFBLEtBQUEsTUFBQSxTQUFBLEdBQ0EsRUFBQSxnQkFDQSxJQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsZUFBQSxFQUFBLE1BQUEsS0FBQSxnQkFBQSxFQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsaUJBQUEsRUFBQSxNQUFBLEtBQUEsa0JBQUEsQ0FDQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsU0FBQSxFQUNBLEdBQUEsYUFBQSxNQUFBLEdBQUEsR0FBQSxTQUFBLFVBQUEsRUFBQSxLQUFBLE1BQUEsU0FBQSxJQUFBLEdBQUEsRUFBQSxXQUNBLElBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxTQUFBLEVBQ0EsR0FBQSxhQUFBLE1BQUEsR0FBQSxHQUFBLFNBQUEsVUFBQSxHQUFBLEVBQUEsV0FFQSxHQUFBLGFBQUEsTUFBQSxHQUFBLEdBQUEsU0FBQSxVQUFBLEVBQUEsS0FBQSxNQUFBLFNBQUEsS0FBQSxFQUFBLFdBS0EiLCJmaWxlIjoiYmlnZXJ0ZWNoLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBjYnBBbmltYXRlZEhlYWRlci5qcyB2MS4wLjBcclxuICogaHR0cDovL3d3dy5jb2Ryb3BzLmNvbVxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbiAqIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDEzLCBDb2Ryb3BzXHJcbiAqIGh0dHA6Ly93d3cuY29kcm9wcy5jb21cclxuICovXHJcbnZhciBhbmltYXRlZEhlYWRlciA9IChmdW5jdGlvbigpIHtcclxuXHJcblx0dmFyIGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXHJcblx0XHRuYXZiYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLm5hdmJhcicgKSxcclxuXHRcdGRpZFNjcm9sbCA9IGZhbHNlLFxyXG5cdFx0Y2hhbmdlSGVhZGVyT24gPSAzMTI7XHJcblxyXG5cdGZ1bmN0aW9uIGluaXQoKSB7XHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ3Njcm9sbCcsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0aWYoICFkaWRTY3JvbGwgKSB7XHJcblx0XHRcdFx0ZGlkU2Nyb2xsID0gdHJ1ZTtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCBzY3JvbGxQYWdlLCAyNTAgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgZmFsc2UgKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHNjcm9sbFBhZ2UoKSB7XHJcblx0XHR2YXIgc3kgPSBzY3JvbGxZKCk7XHJcblx0XHRpZiAoIHN5ID49IGNoYW5nZUhlYWRlck9uICkge1xyXG5cdFx0XHRjbGFzc2llLmFkZCggbmF2YmFyLCAnbmF2YmFyLXBpbm5lZCcgKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRjbGFzc2llLnJlbW92ZSggbmF2YmFyLCAnbmF2YmFyLXBpbm5lZCcgKTtcclxuXHRcdH1cclxuXHJcblx0XHRkaWRTY3JvbGwgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHNjcm9sbFkoKSB7XHJcblx0XHRyZXR1cm4gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY0VsZW0uc2Nyb2xsVG9wO1xyXG5cdH1cclxuXHJcblx0aWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmhvbWUtdGVtcGxhdGUnICkgKSB7XHJcblx0XHRpZiAoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA+IDc2OCApIHtcclxuXHRcdFx0aW5pdCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmNhdGVnb3J5LXRlbXBsYXRlJyApICkge1xyXG5cdFx0aWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmFyY2hpdmUtdGVtcGxhdGUnICkgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmIChkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoID4gNzY4ICkge1xyXG5cdFx0XHRcdGluaXQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmF1dGhvci10ZW1wbGF0ZScgKSApIHtcclxuXHRcdGlmICggZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5hcmNoaXZlLXRlbXBsYXRlJyApICkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpZiAoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA+IDc2OCApIHtcclxuXHRcdFx0XHRpbml0KCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG59KSgpO1xyXG4iLCJqUXVlcnkoZnVuY3Rpb24oJCkge1xyXG4gIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJNU0lFXCIpIDwgMCkge1xyXG4gICAgICAvL0lFOCDkuI3mlK/mjIFjb25zb2xlXHJcbiAgICAgIGNvbnNvbGUubG9nKFwiXl9eIOaDs+WKoOWFpeeslOaIiOenkeaKgOW8gOWPkeWboumYn++8n+ivt+WPkemAgemCruS7tuWIsCBsaXV4aW5nQG1laXp1LmNvbVwiKTtcclxuICB9XHJcblxyXG4gIGlmKCQoXCJpbWcubGF6eVwiKSAmJiAkKFwiaW1nLmxhenlcIikubGVuZ3RoID4gMClcclxuICAgICQoXCJpbWcubGF6eVwiKS5sYXp5bG9hZCh7XHJcbiAgICAgIGVmZmVjdDogXCJmYWRlSW5cIixcclxuICAgICAgdGhyZXNob2xkIDogMzAwXHJcbiAgICB9KTtcclxuXHJcbiAgJChkb2N1bWVudCkucmVhZHkoIGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgcXJjb2RlID0gJChcIi5xcmNvZGVcIik7XHJcbiAgICAgICQoXCIuaWNvbi13ZWNoYXRcIikuaG92ZXIoZnVuY3Rpb24oKXtcclxuICAgICAgICAgIHZhciBwb3MgPSAkKHRoaXMpLnBvc2l0aW9uKCk7XHJcbiAgICAgICAgICBxcmNvZGUuY3NzKFwibGVmdFwiLCAoJCh3aW5kb3cpLndpZHRoKCktcXJjb2RlLndpZHRoKCkpLzIpO1xyXG4gICAgICAgICAgcXJjb2RlLmNzcyhcInRvcFwiLCBwb3MudG9wLTI3MCk7XHJcbiAgICAgICAgICBxcmNvZGUuZmFkZUluKCkuc2hvdygpO1xyXG4gICAgICB9LGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBxcmNvZGUuaGlkZSgpO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiIsIi8qISBMYXp5IExvYWQgMS45LjMgLSBNSVQgbGljZW5zZSAtIENvcHlyaWdodCAyMDEwLTIwMTMgTWlrYSBUdXVwb2xhICovXHJcbiFmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1hKGIpO2EuZm4ubGF6eWxvYWQ9ZnVuY3Rpb24oZil7ZnVuY3Rpb24gZygpe3ZhciBiPTA7aS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKTtpZighai5za2lwX2ludmlzaWJsZXx8Yy5pcyhcIjp2aXNpYmxlXCIpKWlmKGEuYWJvdmV0aGV0b3AodGhpcyxqKXx8YS5sZWZ0b2ZiZWdpbih0aGlzLGopKTtlbHNlIGlmKGEuYmVsb3d0aGVmb2xkKHRoaXMsail8fGEucmlnaHRvZmZvbGQodGhpcyxqKSl7aWYoKytiPmouZmFpbHVyZV9saW1pdClyZXR1cm4hMX1lbHNlIGMudHJpZ2dlcihcImFwcGVhclwiKSxiPTB9KX12YXIgaCxpPXRoaXMsaj17dGhyZXNob2xkOjAsZmFpbHVyZV9saW1pdDowLGV2ZW50Olwic2Nyb2xsXCIsZWZmZWN0Olwic2hvd1wiLGNvbnRhaW5lcjpiLGRhdGFfYXR0cmlidXRlOlwib3JpZ2luYWxcIixza2lwX2ludmlzaWJsZTohMCxhcHBlYXI6bnVsbCxsb2FkOm51bGwscGxhY2Vob2xkZXI6XCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBQVhOU1IwSUFyczRjNlFBQUFBUm5RVTFCQUFDeGp3djhZUVVBQUFBSmNFaFpjd0FBRHNRQUFBN0VBWlVyRGhzQUFBQU5TVVJCVkJoWFl6aDgrUEIvQUFmZkEwbk5QdUNMQUFBQUFFbEZUa1N1UW1DQ1wifTtyZXR1cm4gZiYmKGQhPT1mLmZhaWx1cmVsaW1pdCYmKGYuZmFpbHVyZV9saW1pdD1mLmZhaWx1cmVsaW1pdCxkZWxldGUgZi5mYWlsdXJlbGltaXQpLGQhPT1mLmVmZmVjdHNwZWVkJiYoZi5lZmZlY3Rfc3BlZWQ9Zi5lZmZlY3RzcGVlZCxkZWxldGUgZi5lZmZlY3RzcGVlZCksYS5leHRlbmQoaixmKSksaD1qLmNvbnRhaW5lcj09PWR8fGouY29udGFpbmVyPT09Yj9lOmEoai5jb250YWluZXIpLDA9PT1qLmV2ZW50LmluZGV4T2YoXCJzY3JvbGxcIikmJmguYmluZChqLmV2ZW50LGZ1bmN0aW9uKCl7cmV0dXJuIGcoKX0pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz1hKGIpO2IubG9hZGVkPSExLChjLmF0dHIoXCJzcmNcIik9PT1kfHxjLmF0dHIoXCJzcmNcIik9PT0hMSkmJmMuaXMoXCJpbWdcIikmJmMuYXR0cihcInNyY1wiLGoucGxhY2Vob2xkZXIpLGMub25lKFwiYXBwZWFyXCIsZnVuY3Rpb24oKXtpZighdGhpcy5sb2FkZWQpe2lmKGouYXBwZWFyKXt2YXIgZD1pLmxlbmd0aDtqLmFwcGVhci5jYWxsKGIsZCxqKX1hKFwiPGltZyAvPlwiKS5iaW5kKFwibG9hZFwiLGZ1bmN0aW9uKCl7dmFyIGQ9Yy5hdHRyKFwiZGF0YS1cIitqLmRhdGFfYXR0cmlidXRlKTtjLmhpZGUoKSxjLmlzKFwiaW1nXCIpP2MuYXR0cihcInNyY1wiLGQpOmMuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwidXJsKCdcIitkK1wiJylcIiksY1tqLmVmZmVjdF0oai5lZmZlY3Rfc3BlZWQpLGIubG9hZGVkPSEwO3ZhciBlPWEuZ3JlcChpLGZ1bmN0aW9uKGEpe3JldHVybiFhLmxvYWRlZH0pO2lmKGk9YShlKSxqLmxvYWQpe3ZhciBmPWkubGVuZ3RoO2oubG9hZC5jYWxsKGIsZixqKX19KS5hdHRyKFwic3JjXCIsYy5hdHRyKFwiZGF0YS1cIitqLmRhdGFfYXR0cmlidXRlKSl9fSksMCE9PWouZXZlbnQuaW5kZXhPZihcInNjcm9sbFwiKSYmYy5iaW5kKGouZXZlbnQsZnVuY3Rpb24oKXtiLmxvYWRlZHx8Yy50cmlnZ2VyKFwiYXBwZWFyXCIpfSl9KSxlLmJpbmQoXCJyZXNpemVcIixmdW5jdGlvbigpe2coKX0pLC8oPzppcGhvbmV8aXBvZHxpcGFkKS4qb3MgNS9naS50ZXN0KG5hdmlnYXRvci5hcHBWZXJzaW9uKSYmZS5iaW5kKFwicGFnZXNob3dcIixmdW5jdGlvbihiKXtiLm9yaWdpbmFsRXZlbnQmJmIub3JpZ2luYWxFdmVudC5wZXJzaXN0ZWQmJmkuZWFjaChmdW5jdGlvbigpe2EodGhpcykudHJpZ2dlcihcImFwcGVhclwiKX0pfSksYShjKS5yZWFkeShmdW5jdGlvbigpe2coKX0pLHRoaXN9LGEuYmVsb3d0aGVmb2xkPWZ1bmN0aW9uKGMsZil7dmFyIGc7cmV0dXJuIGc9Zi5jb250YWluZXI9PT1kfHxmLmNvbnRhaW5lcj09PWI/KGIuaW5uZXJIZWlnaHQ/Yi5pbm5lckhlaWdodDplLmhlaWdodCgpKStlLnNjcm9sbFRvcCgpOmEoZi5jb250YWluZXIpLm9mZnNldCgpLnRvcCthKGYuY29udGFpbmVyKS5oZWlnaHQoKSxnPD1hKGMpLm9mZnNldCgpLnRvcC1mLnRocmVzaG9sZH0sYS5yaWdodG9mZm9sZD1mdW5jdGlvbihjLGYpe3ZhciBnO3JldHVybiBnPWYuY29udGFpbmVyPT09ZHx8Zi5jb250YWluZXI9PT1iP2Uud2lkdGgoKStlLnNjcm9sbExlZnQoKTphKGYuY29udGFpbmVyKS5vZmZzZXQoKS5sZWZ0K2EoZi5jb250YWluZXIpLndpZHRoKCksZzw9YShjKS5vZmZzZXQoKS5sZWZ0LWYudGhyZXNob2xkfSxhLmFib3ZldGhldG9wPWZ1bmN0aW9uKGMsZil7dmFyIGc7cmV0dXJuIGc9Zi5jb250YWluZXI9PT1kfHxmLmNvbnRhaW5lcj09PWI/ZS5zY3JvbGxUb3AoKTphKGYuY29udGFpbmVyKS5vZmZzZXQoKS50b3AsZz49YShjKS5vZmZzZXQoKS50b3ArZi50aHJlc2hvbGQrYShjKS5oZWlnaHQoKX0sYS5sZWZ0b2ZiZWdpbj1mdW5jdGlvbihjLGYpe3ZhciBnO3JldHVybiBnPWYuY29udGFpbmVyPT09ZHx8Zi5jb250YWluZXI9PT1iP2Uuc2Nyb2xsTGVmdCgpOmEoZi5jb250YWluZXIpLm9mZnNldCgpLmxlZnQsZz49YShjKS5vZmZzZXQoKS5sZWZ0K2YudGhyZXNob2xkK2EoYykud2lkdGgoKX0sYS5pbnZpZXdwb3J0PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIShhLnJpZ2h0b2Zmb2xkKGIsYyl8fGEubGVmdG9mYmVnaW4oYixjKXx8YS5iZWxvd3RoZWZvbGQoYixjKXx8YS5hYm92ZXRoZXRvcChiLGMpKX0sYS5leHRlbmQoYS5leHByW1wiOlwiXSx7XCJiZWxvdy10aGUtZm9sZFwiOmZ1bmN0aW9uKGIpe3JldHVybiBhLmJlbG93dGhlZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcImFib3ZlLXRoZS10b3BcIjpmdW5jdGlvbihiKXtyZXR1cm4hYS5iZWxvd3RoZWZvbGQoYix7dGhyZXNob2xkOjB9KX0sXCJyaWdodC1vZi1zY3JlZW5cIjpmdW5jdGlvbihiKXtyZXR1cm4gYS5yaWdodG9mZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcImxlZnQtb2Ytc2NyZWVuXCI6ZnVuY3Rpb24oYil7cmV0dXJuIWEucmlnaHRvZmZvbGQoYix7dGhyZXNob2xkOjB9KX0sXCJpbi12aWV3cG9ydFwiOmZ1bmN0aW9uKGIpe3JldHVybiBhLmludmlld3BvcnQoYix7dGhyZXNob2xkOjB9KX0sXCJhYm92ZS10aGUtZm9sZFwiOmZ1bmN0aW9uKGIpe3JldHVybiFhLmJlbG93dGhlZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcInJpZ2h0LW9mLWZvbGRcIjpmdW5jdGlvbihiKXtyZXR1cm4gYS5yaWdodG9mZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcImxlZnQtb2YtZm9sZFwiOmZ1bmN0aW9uKGIpe3JldHVybiFhLnJpZ2h0b2Zmb2xkKGIse3RocmVzaG9sZDowfSl9fSl9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpOyIsInZhciBNZW51ID0ge1xyXG4gIHNldHRpbmdzOiB7XHJcbiAgICBtZW51QnRuOiAkKFwiLmpzLW1lbnVCdG5cIiksXHJcbiAgICBtZW51OiAkKFwiLmpzLW1lbnVcIiksXHJcbiAgICBjbG9zZUJ0bjogJChcIi5qcy1jbG9zZUJ0blwiKSxcclxuICAgIGJnOiAkKFwiLmpzLUJnXCIpLFxyXG4gICAgY29udGFpbmVyOiAkKFwiLmpzLW1lbnVDb250YWluZXJcIiksXHJcbiAgICBpc09wZW46ICExLFxyXG4gICAgaXNBbmltYXRpbmc6ICExXHJcbiAgfSxcclxuICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmJpbmRVSUFjdGlvbnMoKVxyXG4gIH0sXHJcbiAgYmluZFVJQWN0aW9uczogZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xyXG4gICAgZS5tZW51QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBNZW51LnRvZ2dsZSgpXHJcbiAgICB9KTtcclxuICAgIGUuYmcuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIE1lbnUuY2xvc2UoKVxyXG4gICAgfSk7XHJcbiAgICBlLmNvbnRhaW5lci5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgTWVudS5jbG9zZSgpXHJcbiAgICB9KTtcclxuICAgIGUuY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIE1lbnUuY2xvc2UoKVxyXG4gICAgfSk7XHJcbiAgICAkKHdpbmRvdykua2V5ZG93bihmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUud2hpY2ggPT09IDI3ICYmIE1lbnUuY2xvc2UoKVxyXG4gICAgfSlcclxuICB9LFxyXG4gIHRvZ2dsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xyXG4gICAgZS5pc09wZW4gPyBNZW51LmNsb3NlKCkgOiBNZW51Lm9wZW4oKVxyXG4gIH0sXHJcbiAgb3BlbjogZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gdCgpIHtcclxuICAgICAgICBlLm1lbnUuYWRkQ2xhc3MoXCJpcy1hY3RpdmVcIik7XHJcbiAgICAgICAgZS5pc0FuaW1hdGluZyA9ICExXHJcbiAgICB9XHJcbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XHJcbiAgICBpZiAoZS5pc0FuaW1hdGluZyA9PT0gITEpIHtcclxuICAgICAgICBlLmlzT3BlbiA9ICEwO1xyXG4gICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMDtcclxuICAgICAgICBlLm1lbnUuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xyXG4gICAgICAgIHNldFRpbWVvdXQodCwgMTAwKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIHQoKSB7XHJcbiAgICAgICAgZS5tZW51LmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMVxyXG4gICAgfVxyXG4gICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xyXG4gICAgaWYgKGUuaXNBbmltYXRpbmcgPT09ICExKSB7XHJcbiAgICAgICAgZS5pc09wZW4gPSAhMTtcclxuICAgICAgICBlLmlzQW5pbWF0aW5nID0gITA7XHJcbiAgICAgICAgZS5tZW51LnJlbW92ZUNsYXNzKFwiaXMtYWN0aXZlXCIpO1xyXG4gICAgICAgIHNldFRpbWVvdXQodCwgMTIwMClcclxuICAgIH1cclxuICB9XHJcbn0sIFNlYXJjaCA9IHtcclxuICBzZXR0aW5nczoge1xyXG4gICAgICB0ZXh0Qm94OiAkKFwiLnRleHRib3hcIiksXHJcbiAgICAgIHNlYXJjaEJ0bjogJChcIi5qcy1zZWFyY2hCdG5cIiksXHJcbiAgICAgIHNlYXJjaDogJChcIi5qcy1zZWFyY2hcIiksXHJcbiAgICAgIGNsb3NlQnRuOiAkKFwiLmpzLWNsb3NlQnRuXCIpLFxyXG4gICAgICBiZzogJChcIi5qcy1CZ1wiKSxcclxuICAgICAgY29udGFpbmVyOiAkKFwiLmpzLXNlYXJjaENvbnRhaW5lclwiKSxcclxuICAgICAgaXNPcGVuOiAhMSxcclxuICAgICAgaXNBbmltYXRpbmc6ICExXHJcbiAgfSxcclxuICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMuYmluZFVJQWN0aW9ucygpXHJcbiAgfSxcclxuICBiaW5kVUlBY3Rpb25zOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XHJcbiAgICBlLnNlYXJjaEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgU2VhcmNoLnRvZ2dsZSgpXHJcbiAgICB9KTtcclxuICAgIC8vIOWkhOeQhuaQnOe0ouahhumYu+atouWGkuazoVxyXG4gICAgZS50ZXh0Qm94LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICBlLmJnLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBTZWFyY2guY2xvc2UoKVxyXG4gICAgfSk7XHJcbiAgICBlLmNvbnRhaW5lci5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgU2VhcmNoLmNsb3NlKClcclxuICAgIH0pO1xyXG4gICAgZS5jbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgU2VhcmNoLmNsb3NlKClcclxuICAgIH0pO1xyXG4gICAgJCh3aW5kb3cpLmtleWRvd24oZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLndoaWNoID09PSAyNyAmJiBTZWFyY2guY2xvc2UoKVxyXG4gICAgfSlcclxuICB9LFxyXG4gIHRvZ2dsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XHJcbiAgICAgIGUuaXNPcGVuID8gU2VhcmNoLmNsb3NlKCkgOiBTZWFyY2gub3BlbigpXHJcbiAgfSxcclxuICBvcGVuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGZ1bmN0aW9uIHQoKSB7XHJcbiAgICAgICAgICBlLnNlYXJjaC5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcclxuICAgICAgICAgIGUudGV4dEJveC5mb2N1cygpO1xyXG4gICAgICAgICAgZS5pc0FuaW1hdGluZyA9ICExXHJcbiAgICAgIH1cclxuICAgICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xyXG4gICAgICBpZiAoZS5pc0FuaW1hdGluZyA9PT0gITEpIHtcclxuICAgICAgICAgIGUuaXNPcGVuID0gITA7XHJcbiAgICAgICAgICBlLnNlYXJjaC5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KHQsIDEwMClcclxuICAgICAgfVxyXG5cclxuICB9LFxyXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGZ1bmN0aW9uIHQoKSB7XHJcbiAgICAgICAgICBlLnNlYXJjaC5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMVxyXG4gICAgICB9XHJcbiAgICAgIHZhciBlID0gdGhpcy5zZXR0aW5ncztcclxuICAgICAgaWYgKGUuaXNBbmltYXRpbmcgPT09ICExKSB7XHJcbiAgICAgICAgICBlLmlzT3BlbiA9ICExO1xyXG4gICAgICAgICAgZS5pc0FuaW1hdGluZyA9ICEwO1xyXG4gICAgICAgICAgZS5zZWFyY2gucmVtb3ZlQ2xhc3MoXCJpcy1hY3RpdmVcIik7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KHQsIDEyMDApXHJcbiAgICAgIH1cclxuICB9LFxyXG59O1xyXG5cclxudmFyIFRhZyA9IHtcclxuICBzZXR0aW5nczoge1xyXG4gICAgdGFnQnRuOiAkKFwiLmpzLXRhZ0J0blwiKSxcclxuICAgIHRhZzogJChcIi5qcy10YWdzXCIpLFxyXG4gICAgY2xvc2VCdG46ICQoXCIuanMtY2xvc2VCdG5cIiksXHJcbiAgICBiZzogJChcIi5qcy1CZ1wiKSxcclxuICAgIGNvbnRhaW5lcjogJChcIi5qcy10YWdDb250YWluZXJcIiksXHJcbiAgICBpc09wZW46ICExLFxyXG4gICAgaXNBbmltYXRpbmc6ICExXHJcbiAgfSxcclxuICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmJpbmRVSUFjdGlvbnMoKVxyXG4gIH0sXHJcbiAgYmluZFVJQWN0aW9uczogZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xyXG4gICAgZS50YWdCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFRhZy50b2dnbGUoKVxyXG4gICAgfSk7XHJcbiAgICBlLmJnLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBUYWcuY2xvc2UoKVxyXG4gICAgfSk7XHJcbiAgICBlLmNvbnRhaW5lci5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgVGFnLmNsb3NlKClcclxuICAgIH0pO1xyXG4gICAgZS5jbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgVGFnLmNsb3NlKClcclxuICAgIH0pO1xyXG4gICAgJCh3aW5kb3cpLmtleWRvd24oZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLndoaWNoID09PSAyNyAmJiBUYWcuY2xvc2UoKVxyXG4gICAgfSlcclxuICB9LFxyXG4gIHRvZ2dsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xyXG4gICAgZS5pc09wZW4gPyBUYWcuY2xvc2UoKSA6IFRhZy5vcGVuKClcclxuICB9LFxyXG4gIG9wZW46IGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIHQoKSB7XHJcbiAgICAgICAgZS50YWcuYWRkQ2xhc3MoXCJpcy1hY3RpdmVcIik7XHJcbiAgICAgICAgZS5pc0FuaW1hdGluZyA9ICExXHJcbiAgICB9XHJcbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XHJcbiAgICBpZiAoZS5pc0FuaW1hdGluZyA9PT0gITEpIHtcclxuICAgICAgICBlLmlzT3BlbiA9ICEwO1xyXG4gICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMDtcclxuICAgICAgICBlLnRhZy5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XHJcbiAgICAgICAgc2V0VGltZW91dCh0LCAxMDApXHJcbiAgICB9XHJcbiAgfSxcclxuICBjbG9zZTogZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gdCgpIHtcclxuICAgICAgICBlLnRhZy5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgICAgICBlLmlzQW5pbWF0aW5nID0gITFcclxuICAgIH1cclxuICAgIHZhciBlID0gdGhpcy5zZXR0aW5ncztcclxuICAgIGlmIChlLmlzQW5pbWF0aW5nID09PSAhMSkge1xyXG4gICAgICAgIGUuaXNPcGVuID0gITE7XHJcbiAgICAgICAgZS5pc0FuaW1hdGluZyA9ICEwO1xyXG4gICAgICAgIGUudGFnLnJlbW92ZUNsYXNzKFwiaXMtYWN0aXZlXCIpO1xyXG4gICAgICAgIHNldFRpbWVvdXQodCwgMTIwMClcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgTWVudS5pbml0KCk7XHJcbiAgU2VhcmNoLmluaXQoKTtcclxuICBUYWcuaW5pdCgpO1xyXG59KTtcclxuIiwidmFyIHNjcm9sbHRvdG9wPXtcclxuXHJcbiAgICAvL3N0YXJ0bGluZTogSW50ZWdlci4gTnVtYmVyIG9mIHBpeGVscyBmcm9tIHRvcCBvZiBkb2Mgc2Nyb2xsYmFyIGlzIHNjcm9sbGVkIGJlZm9yZSBzaG93aW5nIGNvbnRyb2xcclxuXHJcbiAgICAvL3Njcm9sbHRvOiBLZXl3b3JkIChJbnRlZ2VyLCBvciBcIlNjcm9sbF90b19FbGVtZW50X0lEXCIpLiBIb3cgZmFyIHRvIHNjcm9sbCBkb2N1bWVudCB1cCB3aGVuIGNvbnRyb2wgaXMgY2xpY2tlZCBvbiAoMD10b3ApLlxyXG5cclxuICAgIHNldHRpbmc6IHtzdGFydGxpbmU6MTAwLCBzY3JvbGx0bzogMCwgc2Nyb2xsZHVyYXRpb246MTAwMCwgZmFkZWR1cmF0aW9uOls1MDAsIDEwMF19LFxyXG5cclxuICAgIGNvbnRyb2xIVE1MOiBcIjxkaXYgaWQ9J3RvVG9wJyBjbGFzcz0naWNvbi11cCc+PC9kaXY+XCIsIC8vSFRNTCBmb3IgY29udHJvbCwgd2hpY2ggaXMgYXV0byB3cmFwcGVkIGluIERJViB3LyBJRD1cInRvcGNvbnRyb2xcIlxyXG5cclxuICAgIGNvbnRyb2xhdHRyczoge29mZnNldHg6NSwgb2Zmc2V0eTo1fSwgLy9vZmZzZXQgb2YgY29udHJvbCByZWxhdGl2ZSB0byByaWdodC8gYm90dG9tIG9mIHdpbmRvdyBjb3JuZXJcclxuXHJcbiAgICBhbmNob3JrZXl3b3JkOiAnI3RvcCcsIC8vRW50ZXIgaHJlZiB2YWx1ZSBvZiBIVE1MIGFuY2hvcnMgb24gdGhlIHBhZ2UgdGhhdCBzaG91bGQgYWxzbyBhY3QgYXMgXCJTY3JvbGwgVXBcIiBsaW5rc1xyXG5cclxuIHN0YXRlOiB7aXN2aXNpYmxlOmZhbHNlLCBzaG91bGR2aXNpYmxlOmZhbHNlfSxcclxuXHJcblxyXG4gICAgc2Nyb2xsdXA6ZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmNzc2ZpeGVkc3VwcG9ydCkgLy9pZiBjb250cm9sIGlzIHBvc2l0aW9uZWQgdXNpbmcgSmF2YVNjcmlwdFxyXG5cclxuICAgICAgICAgICAgdGhpcy4kY29udHJvbC5jc3Moe29wYWNpdHk6MH0pIC8vaGlkZSBjb250cm9sIGltbWVkaWF0ZWx5IGFmdGVyIGNsaWNraW5nIGl0XHJcblxyXG4gICAgICAgIHZhciBkZXN0PWlzTmFOKHRoaXMuc2V0dGluZy5zY3JvbGx0byk/IHRoaXMuc2V0dGluZy5zY3JvbGx0byA6IHBhcnNlSW50KHRoaXMuc2V0dGluZy5zY3JvbGx0bylcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBkZXN0PT1cInN0cmluZ1wiICYmIGpRdWVyeSgnIycrZGVzdCkubGVuZ3RoPT0xKSAvL2NoZWNrIGVsZW1lbnQgc2V0IGJ5IHN0cmluZyBleGlzdHNcclxuXHJcbiAgICAgICAgICAgIGRlc3Q9alF1ZXJ5KCcjJytkZXN0KS5vZmZzZXQoKS50b3BcclxuXHJcbiAgICAgICAgZWxzZVxyXG5cclxuICAgICAgICAgICAgZGVzdD0wXHJcblxyXG4gICAgICAgIHRoaXMuJGJvZHkuYW5pbWF0ZSh7c2Nyb2xsVG9wOiBkZXN0fSwgdGhpcy5zZXR0aW5nLnNjcm9sbGR1cmF0aW9uKTtcclxuXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBrZWVwZml4ZWQ6ZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgdmFyICR3aW5kb3c9alF1ZXJ5KHdpbmRvdylcclxuXHJcbiAgICAgICAgdmFyIGNvbnRyb2x4PSR3aW5kb3cuc2Nyb2xsTGVmdCgpICsgJHdpbmRvdy53aWR0aCgpIC0gdGhpcy4kY29udHJvbC53aWR0aCgpIC0gdGhpcy5jb250cm9sYXR0cnMub2Zmc2V0eFxyXG5cclxuICAgICAgICB2YXIgY29udHJvbHk9JHdpbmRvdy5zY3JvbGxUb3AoKSArICR3aW5kb3cuaGVpZ2h0KCkgLSB0aGlzLiRjb250cm9sLmhlaWdodCgpIC0gdGhpcy5jb250cm9sYXR0cnMub2Zmc2V0eVxyXG5cclxuICAgICAgICB0aGlzLiRjb250cm9sLmNzcyh7bGVmdDpjb250cm9seCsncHgnLCB0b3A6Y29udHJvbHkrJ3B4J30pXHJcblxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgdG9nZ2xlY29udHJvbDpmdW5jdGlvbigpe1xyXG5cclxuXHJcblxyXG4gICAgICAgIHZhciBzY3JvbGx0b3A9alF1ZXJ5KHdpbmRvdykuc2Nyb2xsVG9wKClcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmNzc2ZpeGVkc3VwcG9ydClcclxuXHJcbiAgICAgICAgICAgIHRoaXMua2VlcGZpeGVkKClcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZS5zaG91bGR2aXNpYmxlPShzY3JvbGx0b3A+PXRoaXMuc2V0dGluZy5zdGFydGxpbmUpPyB0cnVlIDogZmFsc2VcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2hvdWxkdmlzaWJsZSAmJiAhdGhpcy5zdGF0ZS5pc3Zpc2libGUpe1xyXG5cclxuICAgICAgICAgICAgdGhpcy4kY29udHJvbC5zdG9wKCkuYW5pbWF0ZSh7b3BhY2l0eToxfSwgdGhpcy5zZXR0aW5nLmZhZGVkdXJhdGlvblswXSlcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaXN2aXNpYmxlPXRydWVcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbHNlIGlmICh0aGlzLnN0YXRlLnNob3VsZHZpc2libGU9PWZhbHNlICYmIHRoaXMuc3RhdGUuaXN2aXNpYmxlKXtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuJGNvbnRyb2wuc3RvcCgpLmFuaW1hdGUoe29wYWNpdHk6MH0sIHRoaXMuc2V0dGluZy5mYWRlZHVyYXRpb25bMV0pXHJcblxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmlzdmlzaWJsZT1mYWxzZVxyXG5cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXQ6ZnVuY3Rpb24oKXtcclxuICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCQpe1xyXG4gICAgICAgICAgICB2YXIgbWFpbm9iaj1zY3JvbGx0b3RvcFxyXG4gICAgICAgICAgICB2YXIgaWVicndzPWRvY3VtZW50LmFsbFxyXG4gICAgICAgICAgICBtYWlub2JqLmNzc2ZpeGVkc3VwcG9ydD0haWVicndzIHx8IGllYnJ3cyAmJiBkb2N1bWVudC5jb21wYXRNb2RlPT1cIkNTUzFDb21wYXRcIiAmJiB3aW5kb3cuWE1MSHR0cFJlcXVlc3QgLy9ub3QgSUUgb3IgSUU3KyBicm93c2VycyBpbiBzdGFuZGFyZHMgbW9kZVxyXG4gICAgICAgICAgICBtYWlub2JqLiRib2R5PSh3aW5kb3cub3BlcmEpPyAoZG9jdW1lbnQuY29tcGF0TW9kZT09XCJDU1MxQ29tcGF0XCI/ICQoJ2h0bWwnKSA6ICQoJ2JvZHknKSkgOiAkKCdodG1sLGJvZHknKVxyXG4gICAgICAgICAgICBtYWlub2JqLiRjb250cm9sPSQoJzxkaXYgaWQ9XCJ0b3Bjb250cm9sXCI+JyttYWlub2JqLmNvbnRyb2xIVE1MKyc8L2Rpdj4nKVxyXG4gICAgICAgICAgICAgICAgLmNzcyh7cG9zaXRpb246bWFpbm9iai5jc3NmaXhlZHN1cHBvcnQ/ICdmaXhlZCcgOiAnYWJzb2x1dGUnLCBib3R0b206bWFpbm9iai5jb250cm9sYXR0cnMub2Zmc2V0eSwgcmlnaHQ6bWFpbm9iai5jb250cm9sYXR0cnMub2Zmc2V0eCwgb3BhY2l0eTowLGN1cnNvcjoncG9pbnRlcid9KVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoe3RpdGxlOidTY3JvbGwgdG8gVG9wJ30pXHJcbiAgICAgICAgICAgICAgICAuY2xpY2soZnVuY3Rpb24oKXttYWlub2JqLnNjcm9sbHVwKCk7IHJldHVybiBmYWxzZX0pXHJcbiAgICAgICAgICAgICAgICAuYXBwZW5kVG8oJ2JvZHknKVxyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuWE1MSHR0cFJlcXVlc3QgJiYgbWFpbm9iai4kY29udHJvbC50ZXh0KCkhPScnKSAvL2xvb3NlIGNoZWNrIGZvciBJRTYgYW5kIGJlbG93LCBwbHVzIHdoZXRoZXIgY29udHJvbCBjb250YWlucyBhbnkgdGV4dFxyXG4gICAgICAgICAgICAgICAgbWFpbm9iai4kY29udHJvbC5jc3Moe3dpZHRoOm1haW5vYmouJGNvbnRyb2wud2lkdGgoKX0pIC8vSUU2LSBzZWVtcyB0byByZXF1aXJlIGFuIGV4cGxpY2l0IHdpZHRoIG9uIGEgRElWIGNvbnRhaW5pbmcgdGV4dFxyXG4gICAgICAgICAgICBtYWlub2JqLnRvZ2dsZWNvbnRyb2woKVxyXG5cclxuJCgnYVtocmVmPVwiJyArIG1haW5vYmouYW5jaG9ya2V5d29yZCArJ1wiXScpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBtYWlub2JqLnNjcm9sbHVwKClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAkKHdpbmRvdykuYmluZCgnc2Nyb2xsIHJlc2l6ZScsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgbWFpbm9iai50b2dnbGVjb250cm9sKClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcbnNjcm9sbHRvdG9wLmluaXQoKTtcclxuIiwiXHJcbihmdW5jdGlvbiAoJCkge1xyXG4gIFwidXNlIHN0cmljdFwiO1xyXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcbiAgICAkKFwiLnNjcm9sbC1kb3duXCIpLmFyY3RpY19zY3JvbGwoKTtcclxuXHJcbiAgfSk7XHJcbn0oalF1ZXJ5KSk7XHJcblxyXG4oZnVuY3Rpb24gKCQpIHtcclxuICAkLmZuLmFyY3RpY19zY3JvbGwgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgZWxlbTogJCh0aGlzKSxcclxuICAgICAgc3BlZWQ6IDUwMFxyXG4gICAgfTtcclxuICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpO1xyXG5cclxuICAgIG9wdGlvbnMuZWxlbS5jbGljayhmdW5jdGlvbihldmVudCl7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHZhciBvZmZzZXQgPSAoJCh0aGlzKS5hdHRyKCdkYXRhLW9mZnNldCcpKSA/ICQodGhpcykuYXR0cignZGF0YS1vZmZzZXQnKSA6IGZhbHNlLFxyXG4gICAgICAgIHBvc2l0aW9uID0gKCQodGhpcykuYXR0cignZGF0YS1wb3NpdGlvbicpKSA/ICQodGhpcykuYXR0cignZGF0YS1wb3NpdGlvbicpIDogZmFsc2U7XHJcbiAgICAgIGlmIChvZmZzZXQpIHtcclxuICAgICAgICB2YXIgdG9Nb3ZlID0gcGFyc2VJbnQob2Zmc2V0KTtcclxuICAgICAgICAkKCdodG1sLGJvZHknKS5zdG9wKHRydWUsIGZhbHNlKS5hbmltYXRlKHtzY3JvbGxUb3A6ICgkKHRoaXMuaGFzaCkub2Zmc2V0KCkudG9wICsgdG9Nb3ZlKSB9LCBvcHRpb25zLnNwZWVkKTtcclxuICAgICAgfSBlbHNlIGlmIChwb3NpdGlvbikge1xyXG4gICAgICAgIHZhciB0b01vdmUgPSBwYXJzZUludChwb3NpdGlvbik7XHJcbiAgICAgICAgJCgnaHRtbCxib2R5Jykuc3RvcCh0cnVlLCBmYWxzZSkuYW5pbWF0ZSh7c2Nyb2xsVG9wOiB0b01vdmUgfSwgb3B0aW9ucy5zcGVlZCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnaHRtbCxib2R5Jykuc3RvcCh0cnVlLCBmYWxzZSkuYW5pbWF0ZSh7c2Nyb2xsVG9wOiAoJCh0aGlzLmhhc2gpLm9mZnNldCgpLnRvcCkgfSwgb3B0aW9ucy5zcGVlZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICB9O1xyXG59KShqUXVlcnkpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==